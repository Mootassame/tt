(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"7wo0":function(e,t,o){"use strict";o.r(t),o.d(t,"SettingsModule",(function(){return K}));var r=o("tyNb"),i=o("mrSG"),n=o("Vbab"),a=o("b1TM"),s=o("+dX3"),c=o("dCvk"),d=o("nV0w"),l=o("3arV");const m=["amber","blue","cyan","deep_orange","deep_purple","green","indigo","light_blue","light_green","lime","orange","pink","purple","red","teal","yellow","grey","blue_grey","brown"].map(e=>({id:e,label:Object(n.d)("settings.colors."+e)})),u=["amber","blue","cyan","deep_orange","deep_purple","green","indigo","light_blue","light_green","lime","orange","pink","purple","red","teal","yellow"].map(e=>({id:e,label:Object(n.d)("settings.colors."+e)}));function g(e){return Object(n.d)("settings.fields."+e)}const f={primaryColor:new s.a("primaryColor",g("primaryColor"),m),secondaryColor:new s.a("secondaryColor",g("secondaryColor"),u),backgroundImages:new l.a("backgroundImages",g("backgroundImages"),d.a.values.settingsBackgroundImages,{max:1}),logos:new l.a("logos",g("logos"),d.a.values.settingsLogos,{max:1})};class p extends c.a{static get fields(){return f}}var b=o("rXYk"),v=o("fXoL"),y=o("3Pt+"),h=o("APW9"),C=o("UDmo"),w=o("6SvT"),I=o("ofXK"),k=o("bTqV"),N=o("NFeN");const S=function(){return["/audit-log"]},M=function(){return{entityNames:"settings"}};function L(e,t){1&e&&(v.Nc(0,"button",2),v.Ic(1,"mat-icon",3),v.yd(2,"\xa0 "),v.Ic(3,"app-i18n",4),v.Mc()),2&e&&v.dd("routerLink",v.gd(2,S))("queryParams",v.gd(3,M))}let O=(()=>{class e{constructor(e){this.auditLogService=e}get hasPermissionToAuditLogs(){return this.auditLogService.hasPermissionToRead}}return e.\u0275fac=function(t){return new(t||e)(v.Hc(w.a))},e.\u0275cmp=v.Bc({type:e,selectors:[["app-settings-toolbar"]],decls:2,vars:1,consts:[[1,"app-page-toolbar"],["mat-flat-button","","color","primary",3,"routerLink","queryParams",4,"ngIf"],["mat-flat-button","","color","primary",3,"routerLink","queryParams"],["inline","","fontSet","fas","fontIcon","fa-history"],["key","auditLog.menu"]],template:function(e,t){1&e&&(v.Nc(0,"div",0),v.xd(1,L,4,4,"button",1),v.Mc()),2&e&&(v.wc(1),v.dd("ngIf",t.hasPermissionToAuditLogs))},directives:[I.k,k.b,r.c,N.a,C.a],encapsulation:2}),e})();var x=o("Xa2L"),j=o("kmnG"),F=o("d3UM"),P=o("YPoJ"),X=o("FKr1");function q(e,t){1&e&&(v.Nc(0,"div",6),v.Ic(1,"mat-spinner",7),v.Mc())}function T(e,t){if(1&e&&(v.Nc(0,"mat-option",26),v.Nc(1,"div",27),v.Ic(2,"div",28),v.yd(3),v.Mc(),v.Mc()),2&e){const e=t.$implicit,o=v.Xc(2);v.dd("value",e.id),v.wc(2),v.dd("ngClass",o.classForColor(e.id)),v.wc(1),v.Ad(" ",e.label," ")}}function _(e,t){if(1&e&&(v.Nc(0,"mat-option",26),v.Nc(1,"div",27),v.Ic(2,"div",28),v.yd(3),v.Mc(),v.Mc()),2&e){const e=t.$implicit,o=v.Xc(2);v.dd("value",e.id),v.wc(2),v.dd("ngClass",o.classForColor(e.id)),v.wc(1),v.Ad(" ",e.label," ")}}const A=function(){return["/"]};function G(e,t){if(1&e){const e=v.Oc();v.Nc(0,"form",8,9),v.Tc("ngSubmit",(function(){return v.od(e),v.Xc().doSave()})),v.Nc(2,"mat-form-field",10),v.Nc(3,"span",11),v.Nc(4,"div",12),v.yd(5," \xa0 "),v.Mc(),v.Mc(),v.Nc(6,"mat-select",13),v.xd(7,T,4,3,"mat-option",14),v.Mc(),v.Mc(),v.Nc(8,"mat-form-field",10),v.Nc(9,"span",11),v.Nc(10,"div",12),v.yd(11," \xa0 "),v.Mc(),v.Mc(),v.Nc(12,"mat-select",13),v.xd(13,_,4,3,"mat-option",14),v.Mc(),v.Mc(),v.Ic(14,"app-image-form-field",15),v.Ic(15,"app-image-form-field",15),v.Nc(16,"div",16),v.Nc(17,"button",17),v.Ic(18,"mat-icon",18),v.yd(19,"\xa0 "),v.Ic(20,"app-i18n",19),v.Mc(),v.Nc(21,"button",20),v.Tc("click",(function(){return v.od(e),v.Xc().doReset()})),v.Ic(22,"mat-icon",21),v.yd(23,"\xa0 "),v.Ic(24,"app-i18n",22),v.Mc(),v.Nc(25,"button",23),v.Ic(26,"mat-icon",24),v.yd(27,"\xa0 "),v.Ic(28,"app-i18n",25),v.Mc(),v.Mc(),v.Mc()}if(2&e){const e=v.md(1),t=v.Xc();v.dd("formGroup",t.form),v.wc(4),v.dd("ngClass",t.classForColor(t.form.value.primaryColor)),v.wc(2),v.dd("placeholder",t.fields.primaryColor.label)("formControlName",t.fields.primaryColor.name),v.wc(1),v.dd("ngForOf",t.primaryColorOptions),v.wc(3),v.dd("ngClass",t.classForColor(t.form.value.secondaryColor)),v.wc(2),v.dd("placeholder",t.fields.secondaryColor.label)("formControlName",t.fields.secondaryColor.name),v.wc(1),v.dd("ngForOf",t.secondaryColorOptions),v.wc(1),v.dd("formControl",t.form.get(t.fields.logos.name))("label",t.fields.logos.label)("storage",t.fields.logos.storage)("required",t.fields.logos.required)("max",t.fields.logos.max)("submitted",e.submitted),v.wc(1),v.dd("formControl",t.form.get(t.fields.backgroundImages.name))("label",t.fields.backgroundImages.label)("storage",t.fields.backgroundImages.storage)("required",t.fields.backgroundImages.required)("max",t.fields.backgroundImages.max)("submitted",e.submitted),v.wc(2),v.dd("disabled",t.saveLoading),v.wc(4),v.dd("disabled",t.saveLoading),v.wc(4),v.dd("disabled",t.saveLoading)("routerLink",v.gd(25,A))}}let B=(()=>{class e{constructor(e,t){this.settingsService=e,this.formBuilder=t,this.breadcrumb=[[Object(n.d)("dashboard.menu")],[Object(n.d)("settings.title")]]}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){yield this.settingsService.doInit(),this.buildSchema(),this.doReset()}))}get fields(){return p.fields}get initLoading(){return this.settingsService.initLoading}get saveLoading(){return this.settingsService.saveLoading}get primaryColorOptions(){return this.fields.primaryColor.options.filter(e=>e.id!==this.form.value.secondaryColor)}get secondaryColorOptions(){return this.fields.secondaryColor.options.filter(e=>e.id!==this.form.value.primaryColor)}doSave(){if(this.form.valid)return this.settingsService.doSave(Object.assign(Object.assign({},this.form.value),{theme:`${this.form.value.primaryColor}-${this.form.value.secondaryColor}`}))}doReset(){const e=this.settingsService.settings.theme;this.form=this.schema.buildForm(e&&"default"!==e?Object.assign(Object.assign({},this.settingsService.settings),{primaryColor:e.split("-")[0],secondaryColor:e.split("-")[1]}):Object.assign(Object.assign({},this.settingsService.settings||{}),{primaryColor:"amber",secondaryColor:"blue"}))}classForColor(e){return{"settings-box":!0,[e]:!0}}buildSchema(){this.schema=new b.a([this.fields.primaryColor,this.fields.secondaryColor,this.fields.logos,this.fields.backgroundImages],this.formBuilder)}}return e.\u0275fac=function(t){return new(t||e)(v.Hc(a.a),v.Hc(y.d))},e.\u0275cmp=v.Bc({type:e,selectors:[["app-settings"]],decls:7,vars:3,consts:[[3,"items"],[1,"app-content-page"],[1,"app-content-title"],["key","settings.title"],["class","app-page-spinner",4,"ngIf"],["class","form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"app-page-spinner"],["color","accent"],[1,"form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],["appearance","outline"],["matPrefix",""],[2,"margin-right","16px",3,"ngClass"],[3,"placeholder","formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"formControl","label","storage","required","max","submitted"],[1,"form-buttons"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["inline","","fontSet","far","fontIcon","fa-save"],["key","common.save"],["mat-flat-button","","color","accent","type","button",3,"disabled","click"],["inline","","fontSet","fas","fontIcon","fa-undo"],["key","common.reset"],["mat-flat-button","","color","warn","type","button",3,"disabled","routerLink"],["inline","","fontSet","fas","fontIcon","fa-times"],["key","common.cancel"],[3,"value"],[1,"settings-option-wrapper"],[2,"margin-right","8px",3,"ngClass"]],template:function(e,t){1&e&&(v.Ic(0,"app-breadcrumb",0),v.Nc(1,"div",1),v.Nc(2,"h1",2),v.Ic(3,"app-i18n",3),v.Mc(),v.Ic(4,"app-settings-toolbar"),v.xd(5,q,2,0,"div",4),v.xd(6,G,29,26,"form",5),v.Mc()),2&e&&(v.dd("items",t.breadcrumb),v.wc(5),v.dd("ngIf",t.initLoading),v.wc(1),v.dd("ngIf",!t.initLoading))},directives:[h.a,C.a,O,I.k,x.b,y.s,y.n,y.h,j.c,j.g,I.i,F.a,y.m,y.g,I.j,P.a,y.f,y.q,k.b,N.a,r.c,X.o],encapsulation:2}),e})();var R=o("P+IX"),V=o("uswQ"),Y=o("ogYm"),$=o("mmyZ");const E=[{path:"",component:V.a,children:[{path:"",component:B,canActivate:[R.a,Y.a],data:{permission:$.a.values.settingsEdit}}]}];let H=(()=>{class e{}return e.\u0275mod=v.Fc({type:e}),e.\u0275inj=v.Ec({factory:function(t){return new(t||e)},providers:[],imports:[[r.f.forChild(E)],r.f]}),e})();var J=o("PCNd"),D=o("Tx//");let K=(()=>{class e{}return e.\u0275mod=v.Fc({type:e}),e.\u0275inj=v.Ec({factory:function(t){return new(t||e)},providers:[],imports:[[J.a,H,D.a]]}),e})()},ogYm:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var r=o("mrSG"),i=o("qXBG"),n=o("fXoL"),a=o("tyNb");let s=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return Object(r.a)(this,void 0,void 0,(function*(){return yield this.authService.initialized,e.data.permission&&!!this.authService.hasPermission(e.data.permission)||(this.router.navigate([""]),!1)}))}}return e.\u0275fac=function(t){return new(t||e)(n.Rc(i.a),n.Rc(a.b))},e.\u0275prov=n.Dc({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);