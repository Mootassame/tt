!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{QQG4:function(t,i,o){"use strict";o.d(i,"a",(function(){return U}));var c=o("9Lsv"),s=o("3WK+"),u=o("gfiE"),l=o("u9O/"),d=o("UGp+"),f=o("wd/R"),m=o("Vbab"),p=o("3Pt+"),h=o("ToKS"),g=o("Yo9n"),v=o("3arV"),b=o("s1L9"),w=o("PaKb"),y=o("+dX3"),k=o("VXJn"),N=o("dCvk"),I=o("nV0w"),M=function(t){r(o,t);var i=a(o);function o(t,n,r){var a;return e(this,o),(a=i.call(this,t,n,r)).options=k.a.selectOptions,a}return n(o,[{key:"forExport",value:function(){return d.c().label(this.label).transform((function(e){return e?e.map((function(e){return k.a.labelOf(e)})).join(" "):null}))}}]),o}(w.a);function S(e){return Object(m.d)("user.fields."+e)}var x={id:new s.a("id",S("id")),firstName:new c.a("firstName",S("firstName"),{max:80}),lastName:new c.a("lastName",S("lastName"),{max:175}),password:new c.a("password",S("password"),{required:!0}),oldPassword:new c.a("oldPassword",S("oldPassword"),{required:!0}),newPassword:new c.a("newPassword",S("newPassword"),{required:!0}),newPasswordConfirmation:new c.a("newPasswordConfirmation",S("newPasswordConfirmation"),{required:!0}),fullName:new c.a("fullName",S("fullName")),nationality:new c.a("nationality",S("nationality")),birthDate:new(function(t){r(o,t);var i=a(o);function o(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=a.required,s=void 0!==c&&c;return e(this,o),(r=i.call(this,t,n)).required=s,r}return n(o,[{key:"forPresenter",value:function(e){return e}},{key:"forFilterPreview",value:function(e){return e?f(e).format("YYYY-MM-DD"):null}},{key:"forFilterControl",value:function(e){var t=[h.a.date()];return new p.e(e,t)}},{key:"forFilterCast",value:function(){return d.c().nullable(!0).label(this.label).transform((function(e){return e?f(e).format("YYYY-MM-DD"):null}))}},{key:"forFormControl",value:function(e){var t=[h.a.date()];return this.required&&t.push(p.r.required),new p.e(e,t)}},{key:"forFormCast",value:function(){return d.c().nullable(!0).label(this.label).transform((function(e){return e?f(e).format("YYYY-MM-DD"):null}))}},{key:"forExport",value:function(){return d.c().label(this.label)}},{key:"forImport",value:function(){var e=d.c().nullable(!0).label(this.label).test("is-date",Object(m.d)("validation.mixed.default"),(function(e){return!e||f(e,"YYYY-MM-DD").isValid()}));return this.required&&(e=e.required()),e}}]),o}(l.a))("birthDate",S("birthDate")),email:new c.a("email",S("email"),{required:!0,max:255}),role:new y.a("role",S("role"),k.a.selectOptions),rememberMe:new b.a("rememberMe",S("rememberMe")),phoneNumber:new c.a("phoneNumber",S("phoneNumber"),{matches:/^[0-9]/,max:24}),avatars:new v.a("avatars",S("avatars"),I.a.values.userAvatarsProfiles,{max:1}),emails:new(function(t){r(o,t);var i=a(o);function o(){return e(this,o),i.apply(this,arguments)}return n(o,[{key:"forFormRules",value:function(){var e=d.a().label(this.label).of(d.f().email(Object(m.d)("user.validations.email")).label(Object(m.d)("user.fields.email")).max(255).required());return this.required&&(e=e.required()),[{validator:function(t,n,r){try{e.validateSync(n),r()}catch(i){r(i)}}}]}}]),o}(w.a))("emails",S("emails"),{required:!0}),roles:new M("roles",S("roles"),{}),rolesRequired:new M("roles",S("roles"),{required:!0}),status:new y.a("status",S("status"),[{id:"active",label:Object(m.d)("user.status.active")},{id:"invited",label:Object(m.d)("user.status.invited")},{id:"empty-permissions",label:Object(m.d)("user.status.empty-permissions")},{id:"inactive",label:Object(m.d)("user.status.inactive")}]),createdAt:new u.a("createdAt",S("createdAt")),updatedAt:new u.a("updatedAt",S("updatedAt")),createdAtRange:new g.a("createdAtRange",S("createdAtRange")),roleUser:new l.a("roleUser",S("roleUser"))},U=function(t){r(o,t);var i=a(o);function o(){return e(this,o),i.apply(this,arguments)}return n(o,null,[{key:"fields",get:function(){return x}}]),o}(N.a)},YPZE:function(t,r,i){"use strict";i.d(r,"a",(function(){return o}));var a=i("fXoL"),o=function(){var t=function(){function t(n){e(this,t),this.elementRef=n,this.shouldFocusElement="",this.timer=null,this.timerDelay=10}return n(t,[{key:"ngAfterContentInit",value:function(){""===this.shouldFocusElement&&this.startFocusWorkflow()}},{key:"ngOnChanges",value:function(e){e.timerDelay&&"number"!=typeof this.timerDelay&&isNaN(this.timerDelay=+this.timerDelay)&&(this.timerDelay=10),e.shouldFocusElement&&(this.shouldFocusElement?this.startFocusWorkflow():this.stopFocusWorkflow())}},{key:"ngOnDestroy",value:function(){this.stopFocusWorkflow()}},{key:"startFocusWorkflow",value:function(){var e=this;this.timer||(this.timer=setTimeout((function(){e.timer=null,e.elementRef.nativeElement.focus()}),this.timerDelay))}},{key:"stopFocusWorkflow",value:function(){clearTimeout(this.timer),this.timer=null}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Hc(a.s))},t.\u0275dir=a.Cc({type:t,selectors:[["","autofocus",""],["","appAutofocus",""]],inputs:{shouldFocusElement:["appAutofocus","shouldFocusElement"],timerDelay:["autofocusDelay","timerDelay"]},features:[a.uc]}),t}()},Yj9t:function(t,r,i){"use strict";i.r(r),i.d(r,"AuthModule",(function(){return it}));var a=i("PCNd"),o=i("tyNb"),c=i("mrSG"),s=i("qXBG"),u=i("QQG4"),l=i("rXYk"),d=i("fXoL"),f=i("3Pt+"),m=i("ofXK"),p=i("kmnG"),h=i("qFsG"),g=i("YPZE"),v=i("vFJ8"),b=i("bSwM"),w=i("bTqV"),y=i("UDmo"),k=i("Vbab"),N=i("4SZC");function I(e,t){if(1&e){var n=d.Oc();d.Nc(0,"img",2),d.Tc("click",(function(){d.od(n);var e=t.$implicit;return d.Xc().doChangeLanguage(e.id)})),d.Mc()}if(2&e){var r=t.$implicit;d.dd("alt",r.label)("title",r.label)("src",r.flag,d.qd)}}var M,S=((M=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){this.languages=Object(k.c)()}},{key:"doChangeLanguage",value:function(e){N.a.doChangeLanguage(e)}}]),t}()).\u0275fac=function(e){return new(e||M)},M.\u0275cmp=d.Bc({type:M,selectors:[["app-i18n-flags"]],decls:2,vars:1,consts:[[1,"i18n-flags"],[3,"alt","title","src","click",4,"ngFor","ngForOf"],[3,"alt","title","src","click"]],template:function(e,t){1&e&&(d.Nc(0,"div",0),d.xd(1,I,1,3,"img",1),d.Mc()),2&e&&(d.wc(1),d.dd("ngForOf",t.languages))},directives:[m.j],styles:[".i18n-flags[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;margin-top:24px}.i18n-flags[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:8px;cursor:pointer}"]}),M);function x(e,t){if(1&e&&d.Ic(0,"img",22),2&e){var n=d.Xc();d.dd("src",n.logoUrl,d.qd)}}function U(e,t){1&e&&(d.Nc(0,"h1"),d.Ic(1,"app-i18n",23),d.Mc())}function O(e,t){if(1&e&&(d.Nc(0,"span"),d.yd(1),d.Mc()),2&e){var n=d.Xc();d.wc(1),d.Ad(" ",n.errorMessage," ")}}var C,P,R=((P=function(){function t(n,r){e(this,t),this.formBuilder=n,this.authService=r}return n(t,[{key:"ngOnInit",value:function(){this.authService.doClearErrorMessage(),this.buildSchema(),this.form=this.schema.buildForm({rememberMe:!0})}},{key:"signin",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.form.valid){e.next=2;break}return e.abrupt("return");case 2:return t=this.form.value,n=t.email,r=t.password,i=t.rememberMe,e.next=5,this.authService.doSigninWithEmailAndPassword(n,r,i);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"buildSchema",value:function(){this.schema=new l.a([this.fields.email,this.fields.password,this.fields.rememberMe],this.formBuilder)}},{key:"backgroundImageUrl",get:function(){return this.authService.backgroundImageUrl||"/assets/images/signin.jpg"}},{key:"logoUrl",get:function(){return this.authService.logoUrl}},{key:"fields",get:function(){return u.a.fields}},{key:"loading",get:function(){return this.authService.loading}},{key:"errorStateMatcher",get:function(){var e=this;return{isErrorState:function(t,n){return Boolean(e.errorMessage||t&&t.invalid&&(t.dirty||t.touched||n&&n.submitted))}}}},{key:"errorMessage",get:function(){return this.authService.errorMessage}}]),t}()).\u0275fac=function(e){return new(e||P)(d.Hc(f.d),d.Hc(s.a))},P.\u0275cmp=d.Bc({type:P,selectors:[["app-signin"]],decls:33,vars:17,consts:[[1,"auth"],[1,"wrapper"],[1,"content"],[1,"logo"],["width","240px","alt","",3,"src",4,"ngIf"],[4,"ngIf"],[1,"form",3,"formGroup","ngSubmit"],["floatLabel","always","appearance","outline",1,"w-100"],["matInput","","type","text","autocomplete","email","appAutofocus","",3,"formControlName","errorStateMatcher"],[3,"control","label"],["matInput","","type","password","autocomplete","current-password",3,"formControlName"],["label","Password",3,"control"],[1,"form-field","w-100",2,"display","flex","align-items","baseline","justify-content","space-between"],["color","primary",3,"formControlName"],["mat-button","","color","primary","routerLink","/auth/forgot-password"],["key","auth.forgotPassword"],[1,"form-buttons"],["mat-raised-button","","type","submit","color","primary",1,"w-100",3,"disabled"],["key","auth.signin"],[1,"other-actions"],["mat-button","","color","primary","routerLink","/auth/signup"],["key","auth.createAnAccount"],["width","240px","alt","",3,"src"],["key","app.title"]],template:function(e,t){1&e&&(d.Nc(0,"div",0),d.Nc(1,"div",1),d.Nc(2,"div",2),d.Nc(3,"div",3),d.xd(4,x,1,1,"img",4),d.xd(5,U,2,0,"h1",5),d.Mc(),d.Nc(6,"form",6),d.Tc("ngSubmit",(function(){return t.signin()})),d.Nc(7,"mat-form-field",7),d.Nc(8,"mat-label"),d.yd(9),d.Mc(),d.Ic(10,"input",8),d.Nc(11,"mat-error"),d.Ic(12,"app-validations",9),d.xd(13,O,2,1,"span",5),d.Mc(),d.Mc(),d.Nc(14,"mat-form-field",7),d.Nc(15,"mat-label"),d.yd(16),d.Mc(),d.Ic(17,"input",10),d.Nc(18,"mat-error"),d.Ic(19,"app-validations",11),d.Mc(),d.Mc(),d.Nc(20,"div"),d.Nc(21,"div",12),d.Nc(22,"mat-checkbox",13),d.yd(23),d.Mc(),d.Nc(24,"a",14),d.Ic(25,"app-i18n",15),d.Mc(),d.Mc(),d.Mc(),d.Nc(26,"div",16),d.Nc(27,"button",17),d.Ic(28,"app-i18n",18),d.Mc(),d.Mc(),d.Nc(29,"div",19),d.Nc(30,"a",20),d.Ic(31,"app-i18n",21),d.Mc(),d.Mc(),d.Ic(32,"app-i18n-flags"),d.Mc(),d.Mc(),d.Mc(),d.Mc()),2&e&&(d.wc(1),d.ud("background-image","url("+t.backgroundImageUrl+")"),d.wc(3),d.dd("ngIf",t.logoUrl),d.wc(1),d.dd("ngIf",!t.logoUrl),d.wc(1),d.dd("formGroup",t.form),d.wc(3),d.zd(t.fields.email.label),d.wc(1),d.dd("formControlName",t.fields.email.name)("errorStateMatcher",t.errorStateMatcher),d.wc(2),d.dd("control",t.form.get(t.fields.email.name))("label",t.fields.email.label),d.wc(1),d.dd("ngIf",t.errorMessage),d.wc(3),d.zd(t.fields.password.label),d.wc(1),d.dd("formControlName",t.fields.password.name),d.wc(2),d.dd("control",t.form.get(t.fields.password.name)),d.wc(3),d.dd("formControlName",t.fields.rememberMe.name),d.wc(1),d.Ad("",t.fields.rememberMe.label," "),d.wc(4),d.dd("disabled",t.loading))},directives:[m.k,f.s,f.n,f.h,p.c,p.f,h.b,f.c,g.a,f.m,f.g,p.b,v.a,b.a,w.a,o.e,y.a,w.b,S],encapsulation:2}),P),F=((C=function(){function t(n,r){e(this,t),this.auth=n,this.router=r}return n(t,[{key:"canActivate",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.initialized;case 2:return e.abrupt("return",!this.auth.isSignedIn||(this.router.navigate([""]),!1));case 3:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(e){return new(e||C)(d.Rc(s.a),d.Rc(o.b))},C.\u0275prov=d.Dc({token:C,factory:C.\u0275fac,providedIn:"root"}),C);function j(e,t){if(1&e&&d.Ic(0,"img",17),2&e){var n=d.Xc();d.dd("src",n.logoUrl,d.qd)}}function A(e,t){1&e&&(d.Nc(0,"h1"),d.Ic(1,"app-i18n",18),d.Mc())}function T(e,t){if(1&e&&(d.Nc(0,"span"),d.yd(1),d.Mc()),2&e){var n=d.Xc();d.wc(1),d.Ad(" ",n.errorMessage," ")}}var q,L=((q=function(){function t(n,r,i){e(this,t),this.formBuilder=n,this.route=r,this.authService=i}return n(t,[{key:"ngOnInit",value:function(){this.authService.doClearErrorMessage(),this.buildSchema(),this.form=this.schema.buildForm({email:this.emailFromInvitation?{value:this.emailFromInvitation,disabled:!0}:void 0})}},{key:"signup",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.form.valid){e.next=2;break}return e.abrupt("return");case 2:return t=this.form.value,n=t.email,r=t.password,n=n||this.emailFromInvitation,e.next=6,this.authService.doRegisterEmailAndPassword(n,r);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"buildSchema",value:function(){this.schema=new l.a([this.fields.email,this.fields.password],this.formBuilder)}},{key:"backgroundImageUrl",get:function(){return this.authService.backgroundImageUrl||"/assets/images/signup.jpg"}},{key:"logoUrl",get:function(){return this.authService.logoUrl}},{key:"fields",get:function(){return u.a.fields}},{key:"emailFromInvitation",get:function(){return this.route.snapshot.queryParamMap.get("email")}},{key:"loading",get:function(){return this.authService.loading}},{key:"errorStateMatcher",get:function(){var e=this;return{isErrorState:function(t,n){return Boolean(e.errorMessage||t&&t.invalid&&(t.dirty||t.touched||n&&n.submitted))}}}},{key:"errorMessage",get:function(){return this.authService.errorMessage}}]),t}()).\u0275fac=function(e){return new(e||q)(d.Hc(f.d),d.Hc(o.a),d.Hc(s.a))},q.\u0275cmp=d.Bc({type:q,selectors:[["app-signup"]],decls:26,vars:16,consts:[[1,"auth"],[1,"wrapper"],[1,"content"],[1,"logo"],["width","240px","alt","",3,"src",4,"ngIf"],[4,"ngIf"],[1,"form",3,"formGroup","ngSubmit"],["floatLabel","always","appearance","outline",1,"w-100"],["matInput","","type","text","autocomplete","email","appAutofocus","",3,"formControlName","errorStateMatcher"],[3,"control","label"],["matInput","","type","password","autocomplete","current-password",3,"formControlName"],[1,"form-buttons"],["mat-raised-button","","type","submit","color","primary",1,"w-100",3,"disabled"],["key","auth.signup"],[1,"other-actions"],["mat-button","","color","primary","routerLink","/auth/signin"],["key","auth.alreadyHaveAnAccount"],["width","240px","alt","",3,"src"],["key","app.title"]],template:function(e,t){1&e&&(d.Nc(0,"div",0),d.Nc(1,"div",1),d.Nc(2,"div",2),d.Nc(3,"div",3),d.xd(4,j,1,1,"img",4),d.xd(5,A,2,0,"h1",5),d.Mc(),d.Nc(6,"form",6),d.Tc("ngSubmit",(function(){return t.signup()})),d.Nc(7,"mat-form-field",7),d.Nc(8,"mat-label"),d.yd(9),d.Mc(),d.Ic(10,"input",8),d.Nc(11,"mat-error"),d.Ic(12,"app-validations",9),d.xd(13,T,2,1,"span",5),d.Mc(),d.Mc(),d.Nc(14,"mat-form-field",7),d.Nc(15,"mat-label"),d.yd(16),d.Mc(),d.Ic(17,"input",10),d.Nc(18,"mat-error"),d.Ic(19,"app-validations",9),d.Mc(),d.Mc(),d.Nc(20,"div",11),d.Nc(21,"button",12),d.Ic(22,"app-i18n",13),d.Mc(),d.Mc(),d.Nc(23,"div",14),d.Nc(24,"a",15),d.Ic(25,"app-i18n",16),d.Mc(),d.Mc(),d.Mc(),d.Mc(),d.Mc(),d.Mc()),2&e&&(d.wc(1),d.ud("background-image","url("+t.backgroundImageUrl+")"),d.wc(3),d.dd("ngIf",t.logoUrl),d.wc(1),d.dd("ngIf",!t.logoUrl),d.wc(1),d.dd("formGroup",t.form),d.wc(3),d.zd(t.fields.email.label),d.wc(1),d.dd("formControlName",t.fields.email.name)("errorStateMatcher",t.errorStateMatcher),d.wc(2),d.dd("control",t.form.get(t.fields.email.name))("label",t.fields.email.label),d.wc(1),d.dd("ngIf",t.errorMessage),d.wc(3),d.zd(t.fields.password.label),d.wc(1),d.dd("formControlName",t.fields.password.name),d.wc(2),d.dd("control",t.form.get(t.fields.password.name))("label",t.fields.password.label),d.wc(2),d.dd("disabled",t.loading))},directives:[m.k,f.s,f.n,f.h,p.c,p.f,h.b,f.c,g.a,f.m,f.g,p.b,v.a,w.b,y.a,w.a,o.e],encapsulation:2}),q);function E(e,t){if(1&e&&d.Ic(0,"img",16),2&e){var n=d.Xc();d.dd("src",n.logoUrl,d.qd)}}function B(e,t){1&e&&(d.Nc(0,"h1"),d.Ic(1,"app-i18n",17),d.Mc())}var H,X=((H=function(){function t(n,r){e(this,t),this.formBuilder=n,this.authService=r}return n(t,[{key:"ngOnInit",value:function(){this.buildSchema(),this.form=this.schema.buildForm()}},{key:"submit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.form.valid){e.next=2;break}return e.abrupt("return");case 2:return t=this.form.value.email,e.next=5,this.authService.doSendPasswordResetEmail(t);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"buildSchema",value:function(){this.schema=new l.a([this.fields.email],this.formBuilder)}},{key:"backgroundImageUrl",get:function(){return this.authService.backgroundImageUrl||"/assets/images/forgotPassword.jpg"}},{key:"logoUrl",get:function(){return this.authService.logoUrl}},{key:"fields",get:function(){return u.a.fields}},{key:"loading",get:function(){return this.authService.loadingPasswordResetEmail}}]),t}()).\u0275fac=function(e){return new(e||H)(d.Hc(f.d),d.Hc(s.a))},H.\u0275cmp=d.Bc({type:H,selectors:[["app-forgot-password"]],decls:19,vars:10,consts:[[1,"auth"],[1,"wrapper"],[1,"content"],[1,"logo"],["width","240px","alt","",3,"src",4,"ngIf"],[4,"ngIf"],[1,"form",3,"formGroup","ngSubmit"],["floatLabel","always","appearance","outline",1,"w-100"],["matInput","","type","text","autocomplete","email","appAutofocus","",3,"formControlName"],[3,"control","label"],[1,"form-buttons"],["mat-raised-button","","type","submit","color","primary",1,"w-100",3,"disabled"],["key","auth.passwordResetEmail.message"],[1,"other-actions"],["mat-button","","color","primary","routerLink","/auth/signin"],["key","common.cancel"],["width","240px","alt","",3,"src"],["key","app.title"]],template:function(e,t){1&e&&(d.Nc(0,"div",0),d.Nc(1,"div",1),d.Nc(2,"div",2),d.Nc(3,"div",3),d.xd(4,E,1,1,"img",4),d.xd(5,B,2,0,"h1",5),d.Mc(),d.Nc(6,"form",6),d.Tc("ngSubmit",(function(){return t.submit()})),d.Nc(7,"mat-form-field",7),d.Nc(8,"mat-label"),d.yd(9),d.Mc(),d.Ic(10,"input",8),d.Nc(11,"mat-error"),d.Ic(12,"app-validations",9),d.Mc(),d.Mc(),d.Nc(13,"div",10),d.Nc(14,"button",11),d.Ic(15,"app-i18n",12),d.Mc(),d.Mc(),d.Nc(16,"div",13),d.Nc(17,"a",14),d.Ic(18,"app-i18n",15),d.Mc(),d.Mc(),d.Mc(),d.Mc(),d.Mc(),d.Mc()),2&e&&(d.wc(1),d.ud("background-image","url("+t.backgroundImageUrl+")"),d.wc(3),d.dd("ngIf",t.logoUrl),d.wc(1),d.dd("ngIf",!t.logoUrl),d.wc(1),d.dd("formGroup",t.form),d.wc(3),d.zd(t.fields.email.label),d.wc(1),d.dd("formControlName",t.fields.email.name),d.wc(2),d.dd("control",t.form.get(t.fields.email.name))("label",t.fields.email.label),d.wc(2),d.dd("disabled",t.loading))},directives:[m.k,f.s,f.n,f.h,p.c,p.f,h.b,f.c,g.a,f.m,f.g,p.b,v.a,w.b,y.a,w.a,o.e],encapsulation:2}),H),D=i("AKtp"),G=i("YHaZ"),Y=i("fmGZ"),z=i("AytR");function W(e,t){if(1&e&&(d.Nc(0,"mat-form-field",1),d.Nc(1,"mat-label"),d.yd(2),d.Mc(),d.Ic(3,"input",9),d.Nc(4,"span",10),d.yd(5),d.Mc(),d.Nc(6,"mat-error"),d.Ic(7,"app-validations",3),d.Mc(),d.Mc()),2&e){var n=d.Xc();d.wc(2),d.zd(n.fields.tenantUrl.label),d.wc(1),d.dd("formControlName",n.fields.tenantUrl.name),d.wc(2),d.zd(n.frontendUrlHost),d.wc(2),d.dd("control",n.form.get(n.fields.tenantUrl.name))("label",n.fields.tenantUrl.label)}}function V(e,t){if(1&e){var n=d.Oc();d.Nc(0,"button",11),d.Tc("click",(function(){return d.od(n),d.Xc().viewToggle.emit()})),d.Ic(1,"app-i18n",12),d.Mc()}if(2&e){var r=d.Xc();d.dd("disabled",r.loading)}}var _,K=((_=function(){function t(n,r,i,a){e(this,t),this.formBuilder=n,this.route=r,this.authService=i,this.tenantFormService=a,this.viewToggle=new d.v}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.buildSchema(),this.form=this.schema.buildForm(),this.form.get(this.fields.tenantName.name).valueChanges.subscribe((function(t){e.form.get(e.fields.tenantUrl.name).setValue(t.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-"))}))}},{key:"doSubmit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.form.valid,!e.t0){e.next=4;break}return e.next=4,this.tenantFormService.doCreate(this.form.value);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"buildSchema",value:function(){this.schema=new l.a([this.fields.tenantName,Y.a.isEnabled&&this.fields.tenantUrl].filter(Boolean),this.formBuilder)}},{key:"fields",get:function(){return D.a.fields}},{key:"loading",get:function(){return this.tenantFormService.saveLoading}},{key:"invitedTenants",get:function(){return this.authService.invitedTenants}},{key:"frontendUrlHost",get:function(){return"."+z.a.frontendUrl.host}},{key:"tenantSubdomain",get:function(){return Y.a}}]),t}()).\u0275fac=function(e){return new(e||_)(d.Hc(f.d),d.Hc(o.a),d.Hc(s.a),d.Hc(G.a))},_.\u0275cmp=d.Bc({type:_,selectors:[["app-tenant-new-form"]],outputs:{viewToggle:"viewToggle"},decls:12,vars:8,consts:[[1,"form",3,"formGroup","ngSubmit"],["floatLabel","always","appearance","outline",1,"w-100"],["matInput","","type","text","appAutofocus","",3,"formControlName"],[3,"control","label"],["floatLabel","always","appearance","outline","class","w-100",4,"ngIf"],[1,"form-buttons"],["mat-raised-button","","type","submit","color","primary",1,"w-100",3,"disabled"],["key","tenant.create.button"],["mat-raised-button","","class","w-100","type","button",3,"disabled","click",4,"ngIf"],["matInput","","type","text",3,"formControlName"],["matSuffix",""],["mat-raised-button","","type","button",1,"w-100",3,"disabled","click"],["key","tenant.invitation.view"]],template:function(e,t){1&e&&(d.Nc(0,"form",0),d.Tc("ngSubmit",(function(){return t.doSubmit()})),d.Nc(1,"mat-form-field",1),d.Nc(2,"mat-label"),d.yd(3),d.Mc(),d.Ic(4,"input",2),d.Nc(5,"mat-error"),d.Ic(6,"app-validations",3),d.Mc(),d.Mc(),d.xd(7,W,8,5,"mat-form-field",4),d.Nc(8,"div",5),d.Nc(9,"button",6),d.Ic(10,"app-i18n",7),d.Mc(),d.xd(11,V,2,1,"button",8),d.Mc(),d.Mc()),2&e&&(d.dd("formGroup",t.form),d.wc(3),d.zd(t.fields.tenantName.label),d.wc(1),d.dd("formControlName",t.fields.tenantName.name),d.wc(2),d.dd("control",t.form.get(t.fields.tenantName.name))("label",t.fields.tenantName.label),d.wc(1),d.dd("ngIf",t.tenantSubdomain.isEnabled),d.wc(2),d.dd("disabled",t.loading),d.wc(2),d.dd("ngIf",t.invitedTenants.length))},directives:[f.s,f.n,f.h,p.c,p.f,h.b,f.c,g.a,f.m,f.g,p.b,v.a,m.k,w.b,y.a,p.h],encapsulation:2}),_),J=i("ER6R"),Q=i("d3UM"),Z=i("FKr1");function $(e,t){if(1&e&&(d.Nc(0,"mat-option",10),d.yd(1),d.Mc()),2&e){var n=t.$implicit;d.dd("value",n.id),d.wc(1),d.Ad(" ",n.name," ")}}var ee,te=((ee=function(){function t(n,r,i,a){e(this,t),this.formBuilder=n,this.route=r,this.authService=i,this.tenantInvitationService=a,this.viewToggle=new d.v}return n(t,[{key:"ngOnInit",value:function(){var e,t,n;this.buildSchema(),this.form=this.schema.buildForm((e={},t=this.fields.tenantId.name,n=this.invitedTenants[0].id,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))}},{key:"doSubmit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.form.valid){e.next=2;break}return e.abrupt("return");case 2:return t=this.authService.currentUser.tenants.find((function(e){return e.tenant.id===n.form.value.id})),e.next=5,this.tenantInvitationService.doAccept(t.invitationToken);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"buildSchema",value:function(){this.schema=new l.a([this.fields.tenantId],this.formBuilder)}},{key:"fields",get:function(){return D.a.fields}},{key:"loading",get:function(){return this.tenantInvitationService.loading}},{key:"invitedTenants",get:function(){return this.authService.invitedTenants}}]),t}()).\u0275fac=function(e){return new(e||ee)(d.Hc(f.d),d.Hc(o.a),d.Hc(s.a),d.Hc(J.a))},ee.\u0275cmp=d.Bc({type:ee,selectors:[["app-tenant-select-form"]],outputs:{viewToggle:"viewToggle"},decls:13,vars:8,consts:[[1,"form",3,"formGroup","ngSubmit"],["floatLabel","always","appearance","outline",1,"w-100"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"control","label"],[1,"form-buttons"],["mat-raised-button","","type","submit","color","primary",1,"w-100",3,"disabled"],["key","tenant.invitation.accept"],["mat-raised-button","","type","button",1,"w-100",3,"disabled","click"],["key","tenant.new.title"],[3,"value"]],template:function(e,t){1&e&&(d.Nc(0,"form",0),d.Tc("ngSubmit",(function(){return t.doSubmit()})),d.Nc(1,"mat-form-field",1),d.Nc(2,"mat-label"),d.yd(3),d.Mc(),d.Nc(4,"mat-select",2),d.xd(5,$,2,2,"mat-option",3),d.Mc(),d.Nc(6,"mat-error"),d.Ic(7,"app-validations",4),d.Mc(),d.Mc(),d.Nc(8,"div",5),d.Nc(9,"button",6),d.Ic(10,"app-i18n",7),d.Mc(),d.Nc(11,"button",8),d.Tc("click",(function(){return t.viewToggle.emit()})),d.Ic(12,"app-i18n",9),d.Mc(),d.Mc(),d.Mc()),2&e&&(d.dd("formGroup",t.form),d.wc(3),d.zd(t.fields.tenantId.label),d.wc(1),d.dd("formControlName",t.fields.tenantId.name),d.wc(1),d.dd("ngForOf",t.invitedTenants),d.wc(2),d.dd("control",t.form.get(t.fields.tenantId.name))("label",t.fields.tenantId.label),d.wc(2),d.dd("disabled",t.loading),d.wc(2),d.dd("disabled",t.loading))},directives:[f.s,f.n,f.h,p.c,p.f,Q.a,f.m,f.g,m.j,p.b,v.a,w.b,y.a,Z.o],encapsulation:2}),ee);function ne(e,t){if(1&e&&d.Ic(0,"img",10),2&e){var n=d.Xc();d.dd("src",n.logoUrl,d.qd)}}function re(e,t){1&e&&(d.Nc(0,"h1"),d.Ic(1,"app-i18n",11),d.Mc())}function ie(e,t){if(1&e){var n=d.Oc();d.Nc(0,"app-tenant-new-form",12),d.Tc("viewToggle",(function(){return d.od(n),d.Xc().doToggleView()})),d.Mc()}}function ae(e,t){if(1&e){var n=d.Oc();d.Nc(0,"app-tenant-select-form",12),d.Tc("viewToggle",(function(){return d.od(n),d.Xc().doToggleView()})),d.Mc()}}var oe,ce=((oe=function(){function t(n){e(this,t),this.authService=n,this.view="form"}return n(t,[{key:"ngOnInit",value:function(){this.authService.invitedTenants.length&&(this.view="select")}},{key:"signout",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.doSignout();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"doToggleView",value:function(){this.view="form"===this.view?"select":"form"}},{key:"backgroundImageUrl",get:function(){return this.authService.backgroundImageUrl||"/assets/images/tenant.jpg"}},{key:"logoUrl",get:function(){return this.authService.logoUrl}}]),t}()).\u0275fac=function(e){return new(e||oe)(d.Hc(s.a))},oe.\u0275cmp=d.Bc({type:oe,selectors:[["app-tenant"]],decls:11,vars:6,consts:[[1,"auth"],[1,"wrapper"],[1,"content"],[1,"logo"],["width","240px","alt","",3,"src",4,"ngIf"],[4,"ngIf"],[3,"viewToggle",4,"ngIf"],[1,"other-actions"],["mat-button","","color","primary",3,"click"],["key","auth.signout"],["width","240px","alt","",3,"src"],["key","app.title"],[3,"viewToggle"]],template:function(e,t){1&e&&(d.Nc(0,"div",0),d.Nc(1,"div",1),d.Nc(2,"div",2),d.Nc(3,"div",3),d.xd(4,ne,1,1,"img",4),d.xd(5,re,2,0,"h1",5),d.Mc(),d.xd(6,ie,1,0,"app-tenant-new-form",6),d.xd(7,ae,1,0,"app-tenant-select-form",6),d.Nc(8,"div",7),d.Nc(9,"button",8),d.Tc("click",(function(){return t.signout()})),d.Ic(10,"app-i18n",9),d.Mc(),d.Mc(),d.Mc(),d.Mc(),d.Mc()),2&e&&(d.wc(1),d.ud("background-image","url("+t.backgroundImageUrl+")"),d.wc(3),d.dd("ngIf",t.logoUrl),d.wc(1),d.dd("ngIf",!t.logoUrl),d.wc(1),d.dd("ngIf","form"===t.view),d.wc(1),d.dd("ngIf","select"===t.view))},directives:[m.k,w.b,y.a,K,te],encapsulation:2}),oe);function se(e,t){if(1&e&&d.Ic(0,"img",12),2&e){var n=d.Xc(2);d.dd("src",n.logoUrl,d.qd)}}function ue(e,t){1&e&&(d.Nc(0,"h1"),d.Ic(1,"app-i18n",13),d.Mc())}function le(e,t){if(1&e){var n=d.Oc();d.Nc(0,"div",3),d.Nc(1,"div",4),d.xd(2,se,1,1,"img",5),d.xd(3,ue,2,0,"h1",6),d.Mc(),d.Nc(4,"h3",7),d.Ic(5,"app-i18n",8),d.Mc(),d.Nc(6,"div",9),d.Nc(7,"button",10),d.Tc("click",(function(){return d.od(n),d.Xc().signout()})),d.Ic(8,"app-i18n",11),d.Mc(),d.Mc(),d.Mc()}if(2&e){var r=d.Xc();d.wc(2),d.dd("ngIf",r.logoUrl),d.wc(1),d.dd("ngIf",!r.logoUrl)}}function de(e,t){if(1&e&&d.Ic(0,"img",12),2&e){var n=d.Xc(2);d.dd("src",n.logoUrl,d.qd)}}function fe(e,t){1&e&&(d.Nc(0,"h1"),d.Ic(1,"app-i18n",13),d.Mc())}function me(e,t){if(1&e){var n=d.Oc();d.Nc(0,"div",3),d.Nc(1,"div",4),d.xd(2,de,1,1,"img",5),d.xd(3,fe,2,0,"h1",6),d.Mc(),d.Nc(4,"h3",7),d.Ic(5,"app-i18n",14),d.Mc(),d.Nc(6,"div",9),d.Nc(7,"button",10),d.Tc("click",(function(){return d.od(n),d.Xc().signout()})),d.Ic(8,"app-i18n",11),d.Mc(),d.Mc(),d.Mc()}if(2&e){var r=d.Xc();d.wc(2),d.dd("ngIf",r.logoUrl),d.wc(1),d.dd("ngIf",!r.logoUrl)}}var pe,he,ge,ve,be=((pe=function(){function t(n){e(this,t),this.authService=n}return n(t,[{key:"ngOnInit",value:function(){}},{key:"signout",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.doSignout();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"backgroundImageUrl",get:function(){return this.authService.backgroundImageUrl||"/assets/images/emptyPermissions.jpg"}},{key:"logoUrl",get:function(){return this.authService.logoUrl}},{key:"status",get:function(){return this.authService.currentUser.tenants[0].status}}]),t}()).\u0275fac=function(e){return new(e||pe)(d.Hc(s.a))},pe.\u0275cmp=d.Bc({type:pe,selectors:[["app-empty-permissions"]],decls:4,vars:4,consts:[[1,"auth"],[1,"wrapper"],["class","content",4,"ngIf"],[1,"content"],[1,"logo"],["width","240px","alt","",3,"src",4,"ngIf"],[4,"ngIf"],[2,"font-weight","normal"],["key","auth.emptyPermissions.message"],[1,"other-actions"],["mat-button","","color","primary",3,"click"],["key","auth.signout"],["width","240px","alt","",3,"src"],["key","app.title"],["key","auth.inactive.message"]],template:function(e,t){1&e&&(d.Nc(0,"div",0),d.Nc(1,"div",1),d.xd(2,le,9,2,"div",2),d.xd(3,me,9,2,"div",2),d.Mc(),d.Mc()),2&e&&(d.wc(1),d.ud("background-image","url("+t.backgroundImageUrl+")"),d.wc(1),d.dd("ngIf","empty-permissions"===t.status),d.wc(1),d.dd("ngIf","inactive"===t.status))},directives:[m.k,y.a,w.b],encapsulation:2}),pe),we=i("P+IX"),ye=i("j62l"),ke=((ve=function(){function t(n,r){e(this,t),this.auth=n,this.router=r}return n(t,[{key:"canActivate",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.initialized;case 2:return t=new ye.a(this.auth.currentTenant,this.auth.currentUser),e.abrupt("return",t.isAuthenticated?!!t.isEmptyTenant||(this.router.navigate(["/"]),!1):(this.router.navigate(["/auth/signin"]),!1));case 4:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(e){return new(e||ve)(d.Rc(s.a),d.Rc(o.b))},ve.\u0275prov=d.Dc({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve),Ne=((ge=function(){function t(n,r){e(this,t),this.auth=n,this.router=r}return n(t,[{key:"canActivate",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.initialized;case 2:return e.abrupt("return",!this.auth.isSignedIn||!this.auth.roles.length||(this.router.navigate([""]),!1));case 3:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(e){return new(e||ge)(d.Rc(s.a),d.Rc(o.b))},ge.\u0275prov=d.Dc({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge),Ie=((he=function(){function t(n,r){e(this,t),this.auth=n,this.router=r}return n(t,[{key:"canActivate",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.initialized;case 2:return e.abrupt("return",!this.auth.isSignedIn||!this.auth.currentUser.emailVerified||(this.router.navigate([""]),!1));case 3:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(e){return new(e||he)(d.Rc(s.a),d.Rc(o.b))},he.\u0275prov=d.Dc({token:he,factory:he.\u0275fac,providedIn:"root"}),he);function Me(e,t){if(1&e&&d.Ic(0,"img",13),2&e){var n=d.Xc();d.dd("src",n.logoUrl,d.qd)}}function Se(e,t){1&e&&(d.Nc(0,"h1"),d.Ic(1,"app-i18n",14),d.Mc())}var xe,Ue,Oe=function(e){return[e]},Ce=((xe=function(){function t(n){e(this,t),this.authService=n}return n(t,[{key:"ngOnInit",value:function(){}},{key:"signout",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.doSignout();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"sendEmailConfirmation",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.doSendEmailConfirmation();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"backgroundImageUrl",get:function(){return this.authService.backgroundImageUrl||"/assets/images/emailUnverified.jpg"}},{key:"logoUrl",get:function(){return this.authService.logoUrl}},{key:"loading",get:function(){return this.authService.loadingEmailConfirmation}},{key:"email",get:function(){return this.authService.currentUserEmail}}]),t}()).\u0275fac=function(e){return new(e||xe)(d.Hc(s.a))},xe.\u0275cmp=d.Bc({type:xe,selectors:[["app-email-unverified"]],decls:13,vars:8,consts:[[1,"auth"],[1,"wrapper"],[1,"content"],[1,"logo"],["width","240px","alt","",3,"src",4,"ngIf"],[4,"ngIf"],[2,"text-align","center","font-weight","normal"],["key","auth.emailUnverified.message",3,"args"],["mat-raised-button","","color","primary",1,"w-100",2,"margin-top","24px",3,"disabled","click"],["key","auth.emailUnverified.submit"],[1,"other-actions"],["mat-button","","color","primary",3,"click"],["key","auth.signinWithAnotherAccount"],["width","240px","alt","",3,"src"],["key","app.title"]],template:function(e,t){1&e&&(d.Nc(0,"div",0),d.Nc(1,"div",1),d.Nc(2,"div",2),d.Nc(3,"div",3),d.xd(4,Me,1,1,"img",4),d.xd(5,Se,2,0,"h1",5),d.Mc(),d.Nc(6,"h3",6),d.Ic(7,"app-i18n",7),d.Mc(),d.Nc(8,"button",8),d.Tc("click",(function(){return t.sendEmailConfirmation()})),d.Ic(9,"app-i18n",9),d.Mc(),d.Nc(10,"div",10),d.Nc(11,"button",11),d.Tc("click",(function(){return t.signout()})),d.Ic(12,"app-i18n",12),d.Mc(),d.Mc(),d.Mc(),d.Mc(),d.Mc()),2&e&&(d.wc(1),d.ud("background-image","url("+t.backgroundImageUrl+")"),d.wc(3),d.dd("ngIf",t.logoUrl),d.wc(1),d.dd("ngIf",!t.logoUrl),d.wc(2),d.dd("args",d.hd(6,Oe,t.email)),d.wc(1),d.dd("disabled",t.loading))},directives:[m.k,y.a,w.b],encapsulation:2}),xe),Pe=i("APW9"),Re=i("YPoJ"),Fe=i("NFeN"),je=function(){return["/"]},Ae=((Ue=function(){function t(n,r){e(this,t),this.authService=n,this.formBuilder=r,this.breadcrumb=[[Object(k.d)("dashboard.menu")],[Object(k.d)("auth.profile.title")]]}return n(t,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.buildSchema(),this.buildForm();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"doSave",value:function(){if(this.form.valid){var e=this.schema.cast(this.form.value);return this.authService.doUpdateProfile(e)}}},{key:"doReset",value:function(){this.buildForm()}},{key:"buildForm",value:function(){this.form=this.schema.buildForm(this.authService.currentUser)}},{key:"buildSchema",value:function(){this.schema=new l.a([this.fields.email,this.fields.firstName,this.fields.lastName,this.fields.phoneNumber,this.fields.avatars],this.formBuilder)}},{key:"fields",get:function(){return u.a.fields}},{key:"saveLoading",get:function(){return this.authService.loadingUpdateProfile}},{key:"currentUser",get:function(){return this.authService.currentUser}}]),t}()).\u0275fac=function(e){return new(e||Ue)(d.Hc(s.a),d.Hc(f.d))},Ue.\u0275cmp=d.Bc({type:Ue,selectors:[["app-edit-profile"]],decls:41,vars:28,consts:[[3,"items"],[1,"app-content-page"],[1,"app-content-title"],["key","auth.profile.title"],[1,"form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"row"],[1,"col-md-6"],["floatLabel","always","appearance","outline"],["matInput","",3,"formControlName","required"],[3,"control","label"],[3,"formControl","label","storage","required","max","submitted"],[1,"form-buttons"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["inline","","fontSet","far","fontIcon","fa-save"],["key","common.save"],["mat-flat-button","","color","accent","type","button",3,"disabled","click"],["inline","","fontSet","fas","fontIcon","fa-undo"],["key","common.reset"],["mat-flat-button","","color","warn","type","button",3,"disabled","routerLink"],["inline","","fontSet","fas","fontIcon","fa-times"],["key","common.cancel"]],template:function(e,t){if(1&e&&(d.Ic(0,"app-breadcrumb",0),d.Nc(1,"div",1),d.Nc(2,"h1",2),d.Ic(3,"app-i18n",3),d.Mc(),d.Nc(4,"form",4,5),d.Tc("ngSubmit",(function(){return t.doSave()})),d.Nc(6,"div",6),d.Nc(7,"div",7),d.Nc(8,"mat-form-field",8),d.Nc(9,"mat-label"),d.yd(10),d.Mc(),d.Ic(11,"input",9),d.Nc(12,"mat-error"),d.Ic(13,"app-validations",10),d.Mc(),d.Mc(),d.Nc(14,"mat-form-field",8),d.Nc(15,"mat-label"),d.yd(16),d.Mc(),d.Ic(17,"input",9),d.Nc(18,"mat-error"),d.Ic(19,"app-validations",10),d.Mc(),d.Mc(),d.Nc(20,"mat-form-field",8),d.Nc(21,"mat-label"),d.yd(22),d.Mc(),d.Ic(23,"input",9),d.Nc(24,"mat-error"),d.Ic(25,"app-validations",10),d.Mc(),d.Mc(),d.Mc(),d.Nc(26,"div",7),d.Ic(27,"app-image-form-field",11),d.Mc(),d.Mc(),d.Nc(28,"div",12),d.Nc(29,"button",13),d.Ic(30,"mat-icon",14),d.yd(31,"\xa0 "),d.Ic(32,"app-i18n",15),d.Mc(),d.Nc(33,"button",16),d.Tc("click",(function(){return t.doReset()})),d.Ic(34,"mat-icon",17),d.yd(35,"\xa0 "),d.Ic(36,"app-i18n",18),d.Mc(),d.Nc(37,"button",19),d.Ic(38,"mat-icon",20),d.yd(39,"\xa0 "),d.Ic(40,"app-i18n",21),d.Mc(),d.Mc(),d.Mc(),d.Mc()),2&e){var n=d.md(5);d.dd("items",t.breadcrumb),d.wc(4),d.dd("formGroup",t.form),d.wc(6),d.zd(t.fields.firstName.label),d.wc(1),d.dd("formControlName",t.fields.firstName.name)("required",t.fields.firstName.required),d.wc(2),d.dd("control",t.form.get(t.fields.firstName.name))("label",t.fields.firstName.label),d.wc(3),d.zd(t.fields.lastName.label),d.wc(1),d.dd("formControlName",t.fields.lastName.name)("required",t.fields.lastName.required),d.wc(2),d.dd("control",t.form.get(t.fields.lastName.name))("label",t.fields.lastName.label),d.wc(3),d.zd(t.fields.phoneNumber.label),d.wc(1),d.dd("formControlName",t.fields.phoneNumber.name)("required",t.fields.phoneNumber.required),d.wc(2),d.dd("control",t.form.get(t.fields.phoneNumber.name))("label",t.fields.phoneNumber.label),d.wc(2),d.dd("formControl",t.form.get(t.fields.avatars.name))("label",t.fields.avatars.label)("storage",t.fields.avatars.storage)("required",t.fields.avatars.required)("max",t.fields.avatars.max)("submitted",n.submitted),d.wc(2),d.dd("disabled",t.saveLoading),d.wc(4),d.dd("disabled",t.saveLoading),d.wc(4),d.dd("disabled",t.saveLoading)("routerLink",d.gd(27,je))}},directives:[Pe.a,y.a,f.s,f.n,f.h,p.c,p.f,h.b,f.c,f.m,f.g,f.q,p.b,v.a,Re.a,f.f,w.b,Fe.a,o.c],encapsulation:2}),Ue),Te=i("uswQ");function qe(e,t){if(1&e&&d.Ic(0,"img",8),2&e){var n=d.Xc();d.dd("src",n.logoUrl,d.qd)}}function Le(e,t){1&e&&(d.Nc(0,"h1"),d.Ic(1,"app-i18n",9),d.Mc())}var Ee,Be=((Ee=function(){function t(n,r){e(this,t),this.authService=n,this.route=r}return n(t,[{key:"ngOnInit",value:function(){return this.authService.doVerifyEmail(this.route.snapshot.queryParams.token)}},{key:"backgroundImageUrl",get:function(){return this.authService.backgroundImageUrl||"/assets/images/emailUnverified.jpg"}},{key:"logoUrl",get:function(){return this.authService.logoUrl}}]),t}()).\u0275fac=function(e){return new(e||Ee)(d.Hc(s.a),d.Hc(o.a))},Ee.\u0275cmp=d.Bc({type:Ee,selectors:[["app-verify-email"]],decls:8,vars:4,consts:[[1,"auth"],[1,"wrapper"],[1,"content"],[1,"logo"],["width","240px","alt","",3,"src",4,"ngIf"],[4,"ngIf"],[2,"text-align","center","font-weight","normal"],["key","auth.verifyEmail.message"],["width","240px","alt","",3,"src"],["key","app.title"]],template:function(e,t){1&e&&(d.Nc(0,"div",0),d.Nc(1,"div",1),d.Nc(2,"div",2),d.Nc(3,"div",3),d.xd(4,qe,1,1,"img",4),d.xd(5,Le,2,0,"h1",5),d.Mc(),d.Nc(6,"h3",6),d.Ic(7,"app-i18n",7),d.Mc(),d.Mc(),d.Mc(),d.Mc()),2&e&&(d.wc(1),d.ud("background-image","url("+t.backgroundImageUrl+")"),d.wc(3),d.dd("ngIf",t.logoUrl),d.wc(1),d.dd("ngIf",!t.logoUrl))},directives:[m.k,y.a],encapsulation:2}),Ee);function He(e,t){if(1&e&&d.Ic(0,"img",16),2&e){var n=d.Xc();d.dd("src",n.logoUrl,d.qd)}}function Xe(e,t){1&e&&(d.Nc(0,"h1"),d.Ic(1,"app-i18n",17),d.Mc())}var De,Ge=((De=function(){function t(n,r,i){e(this,t),this.formBuilder=n,this.route=r,this.authService=i}return n(t,[{key:"ngOnInit",value:function(){this.authService.doClearErrorMessage(),this.buildSchema(),this.form=this.schema.buildForm({})}},{key:"submit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.form.valid){e.next=2;break}return e.abrupt("return");case 2:return t=this.form.value.password,n=this.token,e.next=5,this.authService.doResetPassword(n,t);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"buildSchema",value:function(){this.schema=new l.a([this.fields.password],this.formBuilder)}},{key:"backgroundImageUrl",get:function(){return this.authService.backgroundImageUrl||"/assets/images/forgotPassword.jpg"}},{key:"logoUrl",get:function(){return this.authService.logoUrl}},{key:"fields",get:function(){return u.a.fields}},{key:"token",get:function(){return this.route.snapshot.queryParamMap.get("token")}},{key:"loading",get:function(){return this.authService.loadingPasswordReset}},{key:"errorStateMatcher",get:function(){var e=this;return{isErrorState:function(t,n){return Boolean(e.errorMessage||t&&t.invalid&&(t.dirty||t.touched||n&&n.submitted))}}}},{key:"errorMessage",get:function(){return this.authService.errorMessage}}]),t}()).\u0275fac=function(e){return new(e||De)(d.Hc(f.d),d.Hc(o.a),d.Hc(s.a))},De.\u0275cmp=d.Bc({type:De,selectors:[["app-password-reset"]],decls:19,vars:10,consts:[[1,"auth"],[1,"wrapper"],[1,"content"],[1,"logo"],["width","240px","alt","",3,"src",4,"ngIf"],[4,"ngIf"],[1,"form",3,"formGroup","ngSubmit"],["floatLabel","always","appearance","outline",1,"w-100"],["matInput","","type","password","autocomplete","current-password",3,"formControlName"],[3,"control","label"],[1,"form-buttons"],["mat-raised-button","","type","submit","color","primary",1,"w-100",3,"disabled"],["key","auth.passwordReset.message"],[1,"other-actions"],["mat-button","","color","primary","routerLink","/auth/signin"],["key","common.cancel"],["width","240px","alt","",3,"src"],["key","app.title"]],template:function(e,t){1&e&&(d.Nc(0,"div",0),d.Nc(1,"div",1),d.Nc(2,"div",2),d.Nc(3,"div",3),d.xd(4,He,1,1,"img",4),d.xd(5,Xe,2,0,"h1",5),d.Mc(),d.Nc(6,"form",6),d.Tc("ngSubmit",(function(){return t.submit()})),d.Nc(7,"mat-form-field",7),d.Nc(8,"mat-label"),d.yd(9),d.Mc(),d.Ic(10,"input",8),d.Nc(11,"mat-error"),d.Ic(12,"app-validations",9),d.Mc(),d.Mc(),d.Nc(13,"div",10),d.Nc(14,"button",11),d.Ic(15,"app-i18n",12),d.Mc(),d.Mc(),d.Nc(16,"div",13),d.Nc(17,"a",14),d.Ic(18,"app-i18n",15),d.Mc(),d.Mc(),d.Mc(),d.Mc(),d.Mc(),d.Mc()),2&e&&(d.wc(1),d.ud("background-image","url("+t.backgroundImageUrl+")"),d.wc(3),d.dd("ngIf",t.logoUrl),d.wc(1),d.dd("ngIf",!t.logoUrl),d.wc(1),d.dd("formGroup",t.form),d.wc(3),d.zd(t.fields.password.label),d.wc(1),d.dd("formControlName",t.fields.password.name),d.wc(2),d.dd("control",t.form.get(t.fields.password.name))("label",t.fields.password.label),d.wc(2),d.dd("disabled",t.loading))},directives:[m.k,f.s,f.n,f.h,p.c,p.f,h.b,f.c,f.m,f.g,p.b,v.a,w.b,y.a,w.a,o.e],encapsulation:2}),De),Ye=i("Xa2L");function ze(e,t){if(1&e&&d.Ic(0,"img",12),2&e){var n=d.Xc();d.dd("src",n.logoUrl,d.qd)}}function We(e,t){1&e&&(d.Nc(0,"h1"),d.Ic(1,"app-i18n",13),d.Mc())}function Ve(e,t){1&e&&(d.Nc(0,"div",14),d.Ic(1,"mat-spinner",15),d.Mc())}function _e(e,t){if(1&e&&(d.Nc(0,"h3",16),d.yd(1),d.Mc()),2&e){var n=d.Xc();d.wc(1),d.Ad(" ",n.warningMessage," ")}}function Ke(e,t){if(1&e){var n=d.Oc();d.Nc(0,"button",17),d.Tc("click",(function(){return d.od(n),d.Xc().doAcceptWithWrongEmail()})),d.Ic(1,"app-i18n",18),d.Mc()}if(2&e){var r=d.Xc();d.dd("disabled",r.loading)}}var Je,Qe,Ze,$e,et=function(){return["/"]},tt=[{path:"",children:[{path:"signin",component:R,canActivate:[F]},{path:"signup",component:L,canActivate:[F]},{path:"forgot-password",component:X,canActivate:[F]},{path:"tenant",component:ce,canActivate:[we.a,ke]},{path:"empty-permissions",component:be,canActivate:[we.a,Ne]},{path:"email-unverified",component:Ce,canActivate:[we.a,Ie]},{path:"verify-email",component:Be},{path:"invitation",component:(Qe=function(){function t(n,r,i){e(this,t),this.authService=n,this.invitationService=r,this.route=i}return n(t,[{key:"ngOnInit",value:function(){this.invitationService.doAcceptFromAuth(this.token)}},{key:"doAcceptWithWrongEmail",value:function(){return this.invitationService.doAcceptFromAuth(this.token,!0)}},{key:"signout",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.doSignout();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"backgroundImageUrl",get:function(){return this.authService.backgroundImageUrl||"/assets/images/invitation.jpg"}},{key:"logoUrl",get:function(){return this.authService.logoUrl}},{key:"loading",get:function(){return this.invitationService.loading}},{key:"warningMessage",get:function(){return this.invitationService.warningMessage}},{key:"token",get:function(){return this.route.snapshot.queryParams.token}}]),t}(),Qe.\u0275fac=function(e){return new(e||Qe)(d.Hc(s.a),d.Hc(J.a),d.Hc(o.a))},Qe.\u0275cmp=d.Bc({type:Qe,selectors:[["app-invitation"]],decls:12,vars:7,consts:[[1,"auth"],[1,"wrapper"],[1,"content"],[1,"logo"],["width","240px","alt","",3,"src",4,"ngIf"],[4,"ngIf"],["class","app-page-spinner",4,"ngIf"],["style","font-weight: normal; text-align: center;",4,"ngIf"],["mat-raised-button","","style","margin-top: 16px;","class","w-100","color","primary",3,"disabled","click",4,"ngIf"],[1,"other-actions"],["mat-button","","color","primary",3,"click"],["key","auth.signout"],["width","240px","alt","",3,"src"],["key","app.title"],[1,"app-page-spinner"],["color","accent"],[2,"font-weight","normal","text-align","center"],["mat-raised-button","","color","primary",1,"w-100",2,"margin-top","16px",3,"disabled","click"],["key","tenant.invitation.acceptWrongEmail"]],template:function(e,t){1&e&&(d.Nc(0,"div",0),d.Nc(1,"div",1),d.Nc(2,"div",2),d.Nc(3,"div",3),d.xd(4,ze,1,1,"img",4),d.xd(5,We,2,0,"h1",5),d.Mc(),d.xd(6,Ve,2,0,"div",6),d.xd(7,_e,2,1,"h3",7),d.xd(8,Ke,2,1,"button",8),d.Nc(9,"div",9),d.Nc(10,"button",10),d.Tc("click",(function(){return t.signout()})),d.Ic(11,"app-i18n",11),d.Mc(),d.Mc(),d.Mc(),d.Mc(),d.Mc()),2&e&&(d.wc(1),d.ud("background-image","url("+t.backgroundImageUrl+")"),d.wc(3),d.dd("ngIf",t.logoUrl),d.wc(1),d.dd("ngIf",!t.logoUrl),d.wc(1),d.dd("ngIf",t.loading),d.wc(1),d.dd("ngIf",t.warningMessage),d.wc(1),d.dd("ngIf",t.warningMessage))},directives:[m.k,w.b,y.a,Ye.b],encapsulation:2}),Qe)},{path:"password-reset",component:Ge},{path:"profile",component:Te.a,canActivate:[we.a],children:[{path:"",component:Ae,canActivate:[we.a]}]},{path:"password-change",component:Te.a,canActivate:[we.a],children:[{path:"",component:(Je=function(){function t(n,r){e(this,t),this.authService=n,this.formBuilder=r,this.breadcrumb=[[Object(k.d)("dashboard.menu")],[Object(k.d)("auth.passwordChange.title")]]}return n(t,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.buildSchema(),this.buildForm();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"doSave",value:function(){if(this.form.valid){var e=this.schema.cast(this.form.value);return this.authService.doChangePassword(e.oldPassword,e.newPassword)}}},{key:"doReset",value:function(){this.buildForm()}},{key:"buildForm",value:function(){var e=this;this.form=this.schema.buildForm(this.authService.currentUser,{validator:function(t){var n=t.controls[e.fields.newPasswordConfirmation.name];return t.controls[e.fields.newPassword.name].value!==n.value&&n.setErrors({passwordMustMatch:!0}),null}})}},{key:"buildSchema",value:function(){this.schema=new l.a([this.fields.oldPassword,this.fields.newPassword,this.fields.newPasswordConfirmation],this.formBuilder)}},{key:"fields",get:function(){return u.a.fields}},{key:"saveLoading",get:function(){return this.authService.loadingPasswordChange}},{key:"currentUser",get:function(){return this.authService.currentUser}}]),t}(),Je.\u0275fac=function(e){return new(e||Je)(d.Hc(s.a),d.Hc(f.d))},Je.\u0275cmp=d.Bc({type:Je,selectors:[["app-password-change"]],decls:37,vars:22,consts:[[3,"items"],[1,"app-content-page"],[1,"app-content-title"],["key","auth.passwordChange.title"],[1,"form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],["floatLabel","always","appearance","outline"],["matInput","","type","password",3,"formControlName","required"],[3,"control","label"],[1,"form-buttons"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["inline","","fontSet","far","fontIcon","fa-save"],["key","common.save"],["mat-flat-button","","color","accent","type","button",3,"disabled","click"],["inline","","fontSet","fas","fontIcon","fa-undo"],["key","common.reset"],["mat-flat-button","","color","warn","type","button",3,"disabled","routerLink"],["inline","","fontSet","fas","fontIcon","fa-times"],["key","common.cancel"]],template:function(e,t){1&e&&(d.Ic(0,"app-breadcrumb",0),d.Nc(1,"div",1),d.Nc(2,"h1",2),d.Ic(3,"app-i18n",3),d.Mc(),d.Nc(4,"form",4,5),d.Tc("ngSubmit",(function(){return t.doSave()})),d.Nc(6,"mat-form-field",6),d.Nc(7,"mat-label"),d.yd(8),d.Mc(),d.Ic(9,"input",7),d.Nc(10,"mat-error"),d.Ic(11,"app-validations",8),d.Mc(),d.Mc(),d.Nc(12,"mat-form-field",6),d.Nc(13,"mat-label"),d.yd(14),d.Mc(),d.Ic(15,"input",7),d.Nc(16,"mat-error"),d.Ic(17,"app-validations",8),d.Mc(),d.Mc(),d.Nc(18,"mat-form-field",6),d.Nc(19,"mat-label"),d.yd(20),d.Mc(),d.Ic(21,"input",7),d.Nc(22,"mat-error"),d.Ic(23,"app-validations",8),d.Mc(),d.Mc(),d.Nc(24,"div",9),d.Nc(25,"button",10),d.Ic(26,"mat-icon",11),d.yd(27,"\xa0 "),d.Ic(28,"app-i18n",12),d.Mc(),d.Nc(29,"button",13),d.Tc("click",(function(){return t.doReset()})),d.Ic(30,"mat-icon",14),d.yd(31,"\xa0 "),d.Ic(32,"app-i18n",15),d.Mc(),d.Nc(33,"button",16),d.Ic(34,"mat-icon",17),d.yd(35,"\xa0 "),d.Ic(36,"app-i18n",18),d.Mc(),d.Mc(),d.Mc(),d.Mc()),2&e&&(d.dd("items",t.breadcrumb),d.wc(4),d.dd("formGroup",t.form),d.wc(4),d.zd(t.fields.oldPassword.label),d.wc(1),d.dd("formControlName",t.fields.oldPassword.name)("required",t.fields.oldPassword.required),d.wc(2),d.dd("control",t.form.get(t.fields.oldPassword.name))("label",t.fields.oldPassword.label),d.wc(3),d.zd(t.fields.newPassword.label),d.wc(1),d.dd("formControlName",t.fields.newPassword.name)("required",t.fields.newPassword.required),d.wc(2),d.dd("control",t.form.get(t.fields.newPassword.name))("label",t.fields.newPassword.label),d.wc(3),d.zd(t.fields.newPasswordConfirmation.label),d.wc(1),d.dd("formControlName",t.fields.newPasswordConfirmation.name)("required",t.fields.newPasswordConfirmation.required),d.wc(2),d.dd("control",t.form.get(t.fields.newPasswordConfirmation.name))("label",t.fields.newPasswordConfirmation.label),d.wc(2),d.dd("disabled",t.saveLoading),d.wc(4),d.dd("disabled",t.saveLoading),d.wc(4),d.dd("disabled",t.saveLoading)("routerLink",d.gd(21,et)))},directives:[Pe.a,y.a,f.s,f.n,f.h,p.c,p.f,h.b,f.c,f.m,f.g,f.q,p.b,v.a,w.b,Fe.a,o.c],encapsulation:2}),Je),canActivate:[we.a]}]}]}],nt=((Ze=function t(){e(this,t)}).\u0275mod=d.Fc({type:Ze}),Ze.\u0275inj=d.Ec({factory:function(e){return new(e||Ze)},providers:[],imports:[[o.f.forChild(tt)],o.f]}),Ze),rt=i("Tx//"),it=(($e=function t(){e(this,t)}).\u0275mod=d.Fc({type:$e}),$e.\u0275inj=d.Ec({factory:function(e){return new(e||$e)},providers:[],imports:[[a.a,nt,rt.a]]}),$e)},s1L9:function(t,i,o){"use strict";o.d(i,"a",(function(){return d}));var c=o("u9O/"),s=o("UGp+"),u=o("Vbab"),l=o("3Pt+"),d=function(t){r(o,t);var i=a(o);function o(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=a.yesLabel,s=a.noLabel;return e(this,o),(r=i.call(this,t,n)).yesLabel=c||Object(u.d)("common.yes"),r.noLabel=s||Object(u.d)("common.no"),r}return n(o,[{key:"forPresenter",value:function(e){return e?this.yesLabel:this.noLabel}},{key:"forFilterPreview",value:function(e){return null==e?null:Boolean(e)?this.yesLabel:this.noLabel}},{key:"forFormControl",value:function(e){return new l.e(e||!1)}},{key:"forFormCast",value:function(){return s.b().default(!1).label(this.label)}},{key:"forFilterControl",value:function(e){return new l.e(e)}},{key:"forFilterCast",value:function(){return s.b().nullable(!0).label(this.label)}},{key:"forExport",value:function(){return s.b().nullable(!0).default(!1).label(this.label)}},{key:"forImport",value:function(){return s.b().default(!1).label(this.label)}}]),o}(c.a)}}])}();