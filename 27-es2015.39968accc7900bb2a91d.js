(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"7UCR":function(e,t,i){"use strict";i.r(t),i.d(t,"UserModule",(function(){return bt}));var r=i("Tx//"),c=i("tyNb"),o=i("P+IX"),n=i("ogYm"),s=i("mrSG"),a=i("QQG4"),d=i("DCw8"),l=i("QmLB"),u=i("Vbab"),m=i("zkTT"),f=i("qXBG"),p=i("fXoL");let h=(()=>{class e{constructor(e,t,i,r){this.authService=e,this.errorService=t,this.router=i,this.snackbar=r,this.initLoading=!1,this.saveLoading=!1,this.user=null}doInit(e){return Object(s.a)(this,void 0,void 0,(function*(){try{this.user=null,this.initLoading=!0,e&&(this.user=yield d.a.find(e)),this.initLoading=!1}catch(t){this.errorService.handle(t),this.user=null,this.initLoading=!1,this.router.navigate(["/user"])}}))}doAdd(e){return Object(s.a)(this,void 0,void 0,(function*(){try{this.saveLoading=!0,yield d.a.create(e),this.saveLoading=!1,this.snackbar.success(Object(u.d)("user.doAddSuccess")),this.router.navigate(["/user"])}catch(t){this.errorService.handle(t),this.saveLoading=!1}}))}doUpdate(e){return Object(s.a)(this,void 0,void 0,(function*(){try{this.saveLoading=!0,yield d.a.edit(e),this.saveLoading=!1,this.authService.currentUser.id===e.id&&(yield this.authService.doRefreshCurrentUser()),this.snackbar.success(Object(u.d)("user.doUpdateSuccess")),this.router.navigate(["/user"])}catch(t){this.errorService.handle(t),this.saveLoading=!1}}))}}return e.\u0275fac=function(t){return new(t||e)(p.Rc(f.a),p.Rc(l.a),p.Rc(c.b),p.Rc(m.a))},e.\u0275prov=p.Dc({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=i("rXYk"),b=i("3Pt+"),g=i("APW9"),y=i("UDmo"),w=i("ofXK"),I=i("Xa2L"),N=i("kmnG"),S=i("qFsG"),M=i("d3UM"),x=i("vFJ8"),L=i("bTqV"),k=i("NFeN"),O=i("FKr1");function T(e,t){1&e&&(p.Nc(0,"div",6),p.Ic(1,"mat-spinner",7),p.Mc())}function D(e,t){if(1&e&&(p.Nc(0,"mat-option",25),p.yd(1),p.Mc()),2&e){const e=t.$implicit;p.dd("value",e.value),p.wc(1),p.zd(e.label)}}const j=function(){return["/user"]};function C(e,t){if(1&e){const e=p.Oc();p.Nc(0,"form",8,9),p.Tc("ngSubmit",(function(){return p.od(e),p.Xc().doSave()})),p.Nc(2,"mat-form-field",10),p.Nc(3,"mat-label"),p.yd(4),p.Mc(),p.Ic(5,"input",11),p.Mc(),p.Nc(6,"mat-form-field",10),p.Nc(7,"mat-label"),p.yd(8),p.Mc(),p.Nc(9,"mat-select",12),p.xd(10,D,2,2,"mat-option",13),p.Mc(),p.Nc(11,"mat-error"),p.Ic(12,"app-validations",14),p.Mc(),p.Mc(),p.Nc(13,"div",15),p.Nc(14,"button",16),p.Ic(15,"mat-icon",17),p.yd(16,"\xa0 "),p.Ic(17,"app-i18n",18),p.Mc(),p.Nc(18,"button",19),p.Tc("click",(function(){return p.od(e),p.Xc().doReset()})),p.Ic(19,"mat-icon",20),p.yd(20,"\xa0 "),p.Ic(21,"app-i18n",21),p.Mc(),p.Nc(22,"button",22),p.Ic(23,"mat-icon",23),p.yd(24,"\xa0 "),p.Ic(25,"app-i18n",24),p.Mc(),p.Mc(),p.Mc()}if(2&e){const e=p.Xc();p.dd("formGroup",e.form),p.wc(4),p.zd(e.fields.email.label),p.wc(1),p.dd("value",e.user.email)("disabled",!0),p.wc(3),p.zd(e.fields.roles.label),p.wc(1),p.dd("formControlName",e.fields.roles.name)("required",e.fields.roles.required),p.wc(1),p.dd("ngForOf",e.fields.roles.options),p.wc(2),p.dd("control",e.form.get(e.fields.roles.name))("label",e.fields.roles.label),p.wc(2),p.dd("disabled",e.saveLoading),p.wc(4),p.dd("disabled",e.saveLoading),p.wc(4),p.dd("disabled",e.saveLoading)("routerLink",p.gd(14,j))}}let P=(()=>{class e{constructor(e,t,i,r){this.service=e,this.formBuilder=t,this.route=i,this.authService=r,this.breadcrumb=[[Object(u.d)("dashboard.menu")],[Object(u.d)("user.menu"),"/user"],[Object(u.d)("user.edit.title")]]}ngOnInit(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.service.doInit(this.route.snapshot.paramMap.get("id")),this.buildSchema(),this.buildForm()}))}get fields(){return a.a.fields}get initLoading(){return this.service.initLoading}get saveLoading(){return this.service.saveLoading}doSave(){if(!this.form.valid)return;const e=this.schema.cast(this.form.value);return delete e.email,this.service.doUpdate(Object.assign({id:this.user.id},e))}get user(){return this.service.user}doReset(){this.buildForm()}buildForm(){this.form=this.schema.buildForm(this.service.user)}buildSchema(){this.schema=new v.a([this.fields.email,this.fields.roles],this.formBuilder)}}return e.\u0275fac=function(t){return new(t||e)(p.Hc(h),p.Hc(b.d),p.Hc(c.a),p.Hc(f.a))},e.\u0275cmp=p.Bc({type:e,selectors:[["app-user-edit-form"]],decls:6,vars:3,consts:[[3,"items"],[1,"app-content-page"],[1,"app-content-title"],["key","user.edit.title"],["class","app-page-spinner",4,"ngIf"],["class","form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"app-page-spinner"],["color","accent"],[1,"form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],["floatLabel","always","appearance","outline"],["matInput","",3,"value","disabled"],["multiple","",3,"formControlName","required"],[3,"value",4,"ngFor","ngForOf"],[3,"control","label"],[1,"form-buttons"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["inline","","fontSet","far","fontIcon","fa-save"],["key","common.save"],["mat-flat-button","","color","accent","type","button",3,"disabled","click"],["inline","","fontSet","fas","fontIcon","fa-undo"],["key","common.reset"],["mat-flat-button","","color","warn","type","button",3,"disabled","routerLink"],["inline","","fontSet","fas","fontIcon","fa-times"],["key","common.cancel"],[3,"value"]],template:function(e,t){1&e&&(p.Ic(0,"app-breadcrumb",0),p.Nc(1,"div",1),p.Nc(2,"h1",2),p.Ic(3,"app-i18n",3),p.Mc(),p.xd(4,T,2,0,"div",4),p.xd(5,C,26,15,"form",5),p.Mc()),2&e&&(p.dd("items",t.breadcrumb),p.wc(4),p.dd("ngIf",t.initLoading),p.wc(1),p.dd("ngIf",t.form&&!t.initLoading))},directives:[g.a,y.a,w.k,I.b,b.s,b.n,b.h,N.c,N.f,S.b,M.a,b.m,b.g,b.q,w.j,N.b,x.a,L.b,k.a,c.c,O.o],encapsulation:2}),e})();var F=i("zdBv");let R=(()=>{class e{constructor(e){this.authService=e,this.breadcrumb=[[Object(u.d)("dashboard.menu")],[Object(u.d)("user.menu"),"/user"],[Object(u.d)("user.importer.title")]]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(p.Hc(f.a))},e.\u0275cmp=p.Bc({type:e,selectors:[["app-user-importer"]],decls:5,vars:1,consts:[[3,"items"],[1,"app-content-page"],[1,"app-content-title"],["key","user.importer.title"]],template:function(e,t){1&e&&(p.Ic(0,"app-breadcrumb",0),p.Nc(1,"div",1),p.Nc(2,"h1",2),p.Ic(3,"app-i18n",3),p.Mc(),p.Ic(4,"app-importer"),p.Mc()),2&e&&p.dd("items",t.breadcrumb)},directives:[g.a,y.a,F.a],encapsulation:2}),e})();const{fields:A}=a.a;var X=[A.id,A.email,A.fullName,A.phoneNumber,A.avatars,A.roles,A.status,A.createdAt],H=i("Oxlt"),B=i("0EQZ");let K=(()=>{class e{constructor(e,t){this.errorService=e,this.snackbar=t,this.rows=[],this.count=0,this.loading=!1,this.filter={},this._pagination={},this.sorter={},this.selectedKeys=new B.c(!0,[]),this.exportLoading=!1,this.unlimited=!1}get hasRows(){return this.count>0}get orderBy(){const e=this.sorter;return e&&e.columnKey?`${e.columnKey}_${"desc"===e.order?"DESC":"ASC"}`:null}get limit(){if(this.unlimited)return 0;const e=this._pagination;return e&&e.pageSize?e.pageSize:10}get offset(){if(this.unlimited)return 0;const e=this._pagination;return e&&e.pageSize?e.pageIndex*e.pageSize:0}get pagination(){return!this.unlimited&&Object.assign(Object.assign({},this._pagination),{total:this.count,showSizeChanger:!0})}get paginationPageSize(){return this._pagination&&this._pagination.pageSize?this._pagination.pageSize:10}get paginationPageIndex(){return this._pagination&&this._pagination.pageIndex?this._pagination.pageIndex:0}get selectedRows(){return this.rows.filter(e=>this.selectedKeys.isSelected(e.id))}doResetSelectedKeys(){this.selectedKeys=new B.c(!0,[])}doReset(){return Object(s.a)(this,void 0,void 0,(function*(){return this.rows=[],this.count=0,this.loading=!1,this.filter={},this._pagination={},this.sorter={},this.doResetSelectedKeys(),this.exportLoading=!1,this.doFetch()}))}doExport(){return Object(s.a)(this,void 0,void 0,(function*(){try{this.exportLoading=!0;const e=this.filter,t=yield d.a.fetchUsers(e,this.orderBy,null,null);new H.a(X,Object(u.d)("user.users.exporterFileName")).transformAndExportAsExcelFile(t.rows),this.exportLoading=!1}catch(e){this.errorService.handle(e),this.exportLoading=!1}}))}doChangePagination(e){this._pagination=e,this.doFetch(this.filter,!0)}doChangeSort(e){this.sorter=e?{columnKey:e.active,order:e.direction}:{},this.doFetch(this.filter,!0)}doFetch(e,t=!1){return Object(s.a)(this,void 0,void 0,(function*(){try{this.loading=!0,this.rows=[],this.count=0,t||(this._pagination={}),this.filter=e||{},this.doResetSelectedKeys();const i=yield d.a.fetchUsers(e,this.orderBy,this.limit,this.offset);this.rows=i.rows,this.count=i.count,this.loading=!1}catch(i){this.errorService.handle(i),this.loading=!1,this.rows=[],this.count=0}}))}}return e.\u0275fac=function(t){return new(t||e)(p.Rc(l.a),p.Rc(m.a))},e.\u0275prov=p.Dc({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var E=i("VGjC"),z=i("6SvT");let _=(()=>{class e{constructor(e,t,i,r){this.errorService=e,this.snackbar=t,this.router=i,this.userListService=r,this.loading=!1}doDestroy(e){return Object(s.a)(this,void 0,void 0,(function*(){try{this.loading=!0,yield d.a.destroy([e]),this.loading=!1,this.snackbar.success(Object(u.d)("user.doDestroySuccess")),this.router.navigate(["/user"]),yield this.userListService.doFetch(this.userListService.filter)}catch(t){this.errorService.handle(t),this.loading=!1}}))}doDestroyAll(e){return Object(s.a)(this,void 0,void 0,(function*(){try{return this.loading=!0,yield d.a.destroy(e),this.loading=!1,this.userListService.doResetSelectedKeys(),this.snackbar.success(Object(u.d)("user.doDestroyAllSuccess")),this.router.navigate(["/user"]),this.userListService.doFetch(this.userListService.filter)}catch(t){this.errorService.handle(t),this.loading=!1}}))}}return e.\u0275fac=function(t){return new(t||e)(p.Rc(l.a),p.Rc(m.a),p.Rc(c.b),p.Rc(K))},e.\u0275prov=p.Dc({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var q=i("Qu3c");function $(e,t){1&e&&(p.Nc(0,"button",10),p.Ic(1,"mat-icon",11),p.yd(2,"\xa0 "),p.Ic(3,"app-i18n",12),p.Mc()),2&e&&p.dd("routerLink","/user/new")}function G(e,t){1&e&&(p.Nc(0,"button",10),p.Ic(1,"mat-icon",13),p.yd(2,"\xa0 "),p.Ic(3,"app-i18n",14),p.Mc()),2&e&&p.dd("routerLink","/user/import")}function U(e,t){if(1&e){const e=p.Oc();p.Nc(0,"span",6),p.Nc(1,"button",15),p.Tc("click",(function(){return p.od(e),p.Xc().doDestroyAllSelected()})),p.Ic(2,"mat-icon",16),p.yd(3,"\xa0 "),p.Ic(4,"app-i18n",17),p.Mc(),p.Mc()}if(2&e){const e=p.Xc();p.dd("matTooltip",e.destroyButtonTooltip),p.wc(1),p.dd("disabled",e.destroyButtonDisabled)}}const Q=function(){return["/audit-log"]},J=function(){return{entityNames:"user"}};function V(e,t){1&e&&(p.Nc(0,"button",18),p.Ic(1,"mat-icon",19),p.yd(2,"\xa0 "),p.Ic(3,"app-i18n",20),p.Mc()),2&e&&p.dd("routerLink",p.gd(2,Q))("queryParams",p.gd(3,J))}let Z=(()=>{class e{constructor(e,t,i,r){this.service=e,this.userService=t,this.destroyService=i,this.auditLogService=r}doExport(){return this.service.doExport()}doDestroyAllSelected(){return this.destroyService.doDestroyAll(this.service.selectedRows.map(e=>e.id))}get hasPermissionToAuditLogs(){return this.auditLogService.hasPermissionToRead}get hasPermissionToCreate(){return this.userService.hasPermissionToCreate}get hasPermissionToEdit(){return this.userService.hasPermissionToEdit}get hasPermissionToImport(){return this.userService.hasPermissionToImport}get hasPermissionToDestroy(){return this.userService.hasPermissionToDestroy}get exportButtonDisabled(){return!this.service.hasRows||this.service.loading||this.service.exportLoading}get exportButtonTooltip(){if(!this.service.hasRows)return Object(u.d)("common.noDataToExport")}get destroyButtonDisabled(){return this.service.selectedKeys.isEmpty()||this.service.loading}get destroyButtonTooltip(){if(this.service.selectedKeys.isEmpty())return Object(u.d)("common.mustSelectARow")}}return e.\u0275fac=function(t){return new(t||e)(p.Hc(K),p.Hc(E.a),p.Hc(_),p.Hc(z.a))},e.\u0275cmp=p.Bc({type:e,selectors:[["app-user-list-toolbar"]],decls:12,vars:6,consts:[[1,"app-page-toolbar"],[1,"row"],[1,"col-md-12"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[3,"matTooltip",4,"ngIf"],["mat-raised-button","","color","primary",3,"routerLink","queryParams",4,"ngIf"],[3,"matTooltip"],["mat-raised-button","","color","primary",3,"disabled","click"],["inline","","fontSet","far","fontIcon","fa-file-excel"],["key","common.export"],["mat-raised-button","","color","primary",3,"routerLink"],["fontSet","fas","fontIcon","fa-envelope","inline",""],["key","user.invite"],["inline","","fontSet","fas","fontIcon","fa-file-import"],["key","common.import"],["mat-raised-button","","color","warn",3,"disabled","click"],["inline","","fontSet","fas","fontIcon","fa-times"],["key","common.destroy"],["mat-raised-button","","color","primary",3,"routerLink","queryParams"],["inline","","fontSet","fas","fontIcon","fa-history"],["key","auditLog.menu"]],template:function(e,t){1&e&&(p.Nc(0,"div",0),p.Nc(1,"div",1),p.Nc(2,"div",2),p.xd(3,$,4,1,"button",3),p.xd(4,G,4,1,"button",3),p.xd(5,U,5,2,"span",4),p.xd(6,V,4,4,"button",5),p.Nc(7,"span",6),p.Nc(8,"button",7),p.Tc("click",(function(){return t.doExport()})),p.Ic(9,"mat-icon",8),p.yd(10,"\xa0 "),p.Ic(11,"app-i18n",9),p.Mc(),p.Mc(),p.Mc(),p.Mc(),p.Mc()),2&e&&(p.wc(3),p.dd("ngIf",t.hasPermissionToCreate),p.wc(1),p.dd("ngIf",t.hasPermissionToImport),p.wc(1),p.dd("ngIf",t.hasPermissionToDestroy),p.wc(1),p.dd("ngIf",t.hasPermissionToAuditLogs),p.wc(1),p.dd("matTooltip",t.exportButtonTooltip),p.wc(1),p.dd("disabled",t.exportButtonDisabled))},directives:[w.k,q.a,L.b,k.a,y.a,c.c],encapsulation:2}),e})();var Y=i("6qfu"),W=i("cscj");function ee(e,t){if(1&e&&(p.Nc(0,"mat-option",19),p.yd(1),p.Mc()),2&e){const e=t.$implicit;p.dd("value",e.id),p.wc(1),p.Ad(" ",e.label," ")}}function te(e,t){if(1&e&&(p.Nc(0,"mat-option",19),p.yd(1),p.Mc()),2&e){const e=t.$implicit;p.dd("value",e.value),p.wc(1),p.Ad(" ",e.label," ")}}function ie(e,t){if(1&e){const e=p.Oc();p.Nc(0,"form",3,4),p.Tc("ngSubmit",(function(){return p.od(e),p.Xc().doFilter()})),p.Nc(2,"div",5),p.Nc(3,"div",6),p.Nc(4,"mat-form-field",7),p.Nc(5,"mat-label"),p.yd(6),p.Mc(),p.Ic(7,"input",8),p.Nc(8,"mat-error"),p.Ic(9,"app-validations",9),p.Mc(),p.Mc(),p.Mc(),p.Nc(10,"div",6),p.Nc(11,"mat-form-field",7),p.Nc(12,"mat-label"),p.yd(13),p.Mc(),p.Ic(14,"input",8),p.Nc(15,"mat-error"),p.Ic(16,"app-validations",9),p.Mc(),p.Mc(),p.Mc(),p.Nc(17,"div",6),p.Nc(18,"mat-form-field",7),p.Nc(19,"mat-label"),p.yd(20),p.Mc(),p.Nc(21,"mat-select",10),p.Nc(22,"mat-option"),p.yd(23,"--"),p.Mc(),p.xd(24,ee,2,2,"mat-option",11),p.Mc(),p.Nc(25,"mat-error"),p.Ic(26,"app-validations",9),p.Mc(),p.Mc(),p.Mc(),p.Nc(27,"div",6),p.Nc(28,"mat-form-field",7),p.Nc(29,"mat-label"),p.yd(30),p.Mc(),p.Nc(31,"mat-select",10),p.Nc(32,"mat-option"),p.yd(33,"--"),p.Mc(),p.xd(34,te,2,2,"mat-option",11),p.Mc(),p.Nc(35,"mat-error"),p.Ic(36,"app-validations",9),p.Mc(),p.Mc(),p.Mc(),p.Mc(),p.Nc(37,"div",12),p.Nc(38,"button",13),p.Ic(39,"mat-icon",14),p.yd(40,"\xa0 "),p.Ic(41,"app-i18n",15),p.Mc(),p.Nc(42,"button",16),p.Tc("click",(function(){return p.od(e),p.Xc().doReset()})),p.Ic(43,"mat-icon",17),p.yd(44,"\xa0 "),p.Ic(45,"app-i18n",18),p.Mc(),p.Mc(),p.Mc()}if(2&e){const e=p.Xc();p.dd("formGroup",e.form),p.wc(6),p.zd(e.fields.email.label),p.wc(1),p.dd("formControlName",e.fields.email.name),p.wc(2),p.dd("control",e.form.get(e.fields.email.name))("label",e.fields.email.label),p.wc(4),p.zd(e.fields.fullName.label),p.wc(1),p.dd("formControlName",e.fields.fullName.name),p.wc(2),p.dd("control",e.form.get(e.fields.fullName.name))("label",e.fields.fullName.label),p.wc(4),p.zd(e.fields.status.label),p.wc(1),p.dd("formControlName",e.fields.status.name),p.wc(3),p.dd("ngForOf",e.fields.status.options),p.wc(2),p.dd("control",e.form.get(e.fields.status.name))("label",e.fields.status.label),p.wc(4),p.zd(e.fields.role.label),p.wc(1),p.dd("formControlName",e.fields.role.name),p.wc(3),p.dd("ngForOf",e.fields.role.options),p.wc(2),p.dd("control",e.form.get(e.fields.role.name))("label",e.fields.role.label),p.wc(2),p.dd("disabled",e.loading),p.wc(4),p.dd("disabled",e.loading)}}let re=(()=>{class e{constructor(e,t,i){this.service=e,this.formBuilder=t,this.route=i,this.expanded=!1}ngOnInit(){return Object(s.a)(this,void 0,void 0,(function*(){this.buildSchema(),this.buildForm(),this.doFilter()}))}get fields(){return a.a.fields}get loading(){return this.service.loading}doToggleExpanded(){this.expanded=!this.expanded}doFilter(){if(!this.form.valid)return;this.expanded=!1;const e=this.schema.cast(this.form.value);return this.service.doFetch(e)}buildForm(){const{filter:e}=this.service;this.form=this.schema.buildForm(e,this.route.snapshot.queryParams)}doReset(){this.form=this.schema.buildForm(),this.service.doReset(),this.expanded=!1}buildSchema(){this.schema=new Y.a([this.fields.fullName,this.fields.email,this.fields.role,this.fields.status],this.formBuilder)}}return e.\u0275fac=function(t){return new(t||e)(p.Hc(K),p.Hc(b.d),p.Hc(c.a))},e.\u0275cmp=p.Bc({type:e,selectors:[["app-user-list-filter"]],decls:3,vars:4,consts:[[1,"filter"],[3,"values","fields","expanded","click"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"row"],[1,"col-xs-12","col-lg-6"],["floatLabel","always","appearance","outline"],["matInput","",3,"formControlName"],[3,"control","label"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-buttons"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["inline","","fontSet","fas","fontIcon","fa-search"],["key","common.search"],["mat-flat-button","","color","accent","type","button",3,"disabled","click"],["inline","","fontSet","fas","fontIcon","fa-undo"],["key","common.reset"],[3,"value"]],template:function(e,t){1&e&&(p.Nc(0,"div",0),p.Nc(1,"app-filter-preview",1),p.Tc("click",(function(){return t.doToggleExpanded()})),p.Mc(),p.xd(2,ie,46,21,"form",2),p.Mc()),2&e&&(p.wc(1),p.dd("values",t.form.value)("fields",t.fields)("expanded",t.expanded),p.wc(1),p.dd("ngIf",t.form&&t.expanded))},directives:[W.a,w.k,b.s,b.n,b.h,N.c,N.f,S.b,b.c,b.m,b.g,N.b,x.a,M.a,O.o,w.j,L.b,k.a,y.a],encapsulation:2}),e})();var ce=i("VXJn"),oe=i("t7ZL"),ne=i("+0xr"),se=i("Dh3D"),ae=i("M9IT"),de=i("9Zza"),le=i("n9IN"),ue=i("S7/7");function me(e,t){if(1&e&&(p.Nc(0,"th",14),p.Ic(1,"app-table-th-checkbox",15),p.Mc()),2&e){const e=p.Xc();p.wc(1),p.dd("rows",e.service.rows)("selectedKeys",e.service.selectedKeys)}}function fe(e,t){if(1&e&&(p.Nc(0,"td",16),p.Ic(1,"app-table-td-checkbox",17),p.Mc()),2&e){const e=t.$implicit,i=p.Xc();p.wc(1),p.dd("row",e)("selectedKeys",i.service.selectedKeys)}}function pe(e,t){if(1&e&&(p.Nc(0,"th",14),p.yd(1),p.Mc()),2&e){const e=p.Xc();p.wc(1),p.Ad(" ",e.fields.avatars.label," ")}}function he(e,t){if(1&e&&(p.Nc(0,"td",16),p.Ic(1,"app-table-item-images",18),p.Mc()),2&e){const e=t.$implicit,i=p.Xc();p.wc(1),p.dd("value",i.presenter(e,"avatars"))}}function ve(e,t){if(1&e&&(p.Nc(0,"th",19),p.yd(1),p.Mc()),2&e){const e=p.Xc();p.wc(1),p.Ad(" ",e.fields.email.label," ")}}function be(e,t){if(1&e&&(p.Nc(0,"td",16),p.yd(1),p.Mc()),2&e){const e=t.$implicit,i=p.Xc();p.wc(1),p.Ad(" ",i.presenter(e,"email")," ")}}function ge(e,t){if(1&e&&(p.Nc(0,"th",19),p.yd(1),p.Mc()),2&e){const e=p.Xc();p.wc(1),p.Ad(" ",e.fields.fullName.label," ")}}function ye(e,t){if(1&e&&(p.Nc(0,"td",16),p.yd(1),p.Mc()),2&e){const e=t.$implicit,i=p.Xc();p.wc(1),p.Ad(" ",i.presenter(e,"fullName")," ")}}function we(e,t){if(1&e&&(p.Nc(0,"th",14),p.yd(1),p.Mc()),2&e){const e=p.Xc();p.wc(1),p.Ad(" ",e.fields.roles.label," ")}}function Ie(e,t){if(1&e&&(p.Nc(0,"div",22),p.yd(1),p.Mc()),2&e){const e=t.$implicit,i=p.Xc(2);p.dd("matTooltip",i.roleDescriptionOf(e)),p.wc(1),p.Ad(" ",i.roleLabelOf(e)," ")}}function Ne(e,t){if(1&e&&(p.Nc(0,"td",20),p.xd(1,Ie,2,2,"div",21),p.Mc()),2&e){const e=t.$implicit;p.wc(1),p.dd("ngForOf",e.roles)}}function Se(e,t){if(1&e&&(p.Nc(0,"th",19),p.yd(1),p.Mc()),2&e){const e=p.Xc();p.wc(1),p.Ad(" ",e.fields.status.label," ")}}const Me=function(e,t,i){return{"text-green":e,"text-yellow":t,"text-red":i}};function xe(e,t){if(1&e&&(p.Nc(0,"td",16),p.Nc(1,"strong",23),p.yd(2),p.Mc(),p.Mc()),2&e){const e=t.$implicit,i=p.Xc();p.wc(1),p.dd("ngClass",p.jd(2,Me,"active"===e[i.fields.status.name],"invited"===e[i.fields.status.name],"empty-permissions"===e[i.fields.status.name])),p.wc(1),p.Ad("",i.presenter(e,"status")," ")}}function Le(e,t){1&e&&p.Ic(0,"th",24)}const ke=function(e){return["/user",e,"edit"]};function Oe(e,t){if(1&e&&(p.Nc(0,"button",25),p.Nc(1,"mat-icon"),p.yd(2,"edit"),p.Mc(),p.Mc()),2&e){const e=p.Xc().$implicit,t=p.Xc();p.dd("routerLink",p.hd(2,ke,e.id))("matTooltip",t.i18n("common.edit"))}}function Te(e,t){if(1&e){const e=p.Oc();p.Nc(0,"button",28),p.Tc("click",(function(){p.od(e);const t=p.Xc().$implicit;return p.Xc().doDestroy(t.id)})),p.Nc(1,"mat-icon"),p.yd(2,"delete"),p.Mc(),p.Mc()}if(2&e){const e=p.Xc(2);p.dd("matTooltip",e.i18n("common.destroy"))}}const De=function(e){return["/user",e]};function je(e,t){if(1&e&&(p.Nc(0,"td",16),p.Nc(1,"button",25),p.Nc(2,"mat-icon"),p.yd(3,"search"),p.Mc(),p.Mc(),p.xd(4,Oe,3,4,"button",26),p.xd(5,Te,3,1,"button",27),p.Mc()),2&e){const e=t.$implicit,i=p.Xc();p.wc(1),p.dd("routerLink",p.hd(4,De,e.id))("matTooltip",i.i18n("common.view")),p.wc(3),p.dd("ngIf",i.hasPermissionToEdit),p.wc(1),p.dd("ngIf",i.hasPermissionToDestroy)}}function Ce(e,t){1&e&&p.Ic(0,"tr",29)}function Pe(e,t){1&e&&p.Ic(0,"tr",30)}function Fe(e,t){1&e&&(p.Nc(0,"div",31),p.Ic(1,"app-i18n",32),p.Mc())}function Re(e,t){1&e&&(p.Nc(0,"div",31),p.Ic(1,"app-i18n",33),p.Mc())}const Ae=function(){return[10,20,30,40]};let Xe=(()=>{class e{constructor(e,t,i,r){this.service=e,this.userService=t,this.destroyService=i,this.confirmService=r}presenter(e,t){return a.a.presenter(e,t)}roleDescriptionOf(e){return ce.a.descriptionOf(e)}roleLabelOf(e){return ce.a.labelOf(e)}i18n(e){return Object(u.d)(e)}doDestroy(e){return Object(s.a)(this,void 0,void 0,(function*(){if(yield this.confirmService.confirm())return this.destroyService.doDestroy(e)}))}get hasPermissionToEdit(){return this.userService.hasPermissionToEdit}get hasPermissionToDestroy(){return this.userService.hasPermissionToDestroy}get fields(){return a.a.fields}get columns(){return["_select",this.fields.avatars.name,this.fields.email.name,this.fields.fullName.name,this.fields.roles.name,this.fields.status.name,"_actions"]}}return e.\u0275fac=function(t){return new(t||e)(p.Hc(K),p.Hc(E.a),p.Hc(_),p.Hc(oe.a))},e.\u0275cmp=p.Bc({type:e,selectors:[["app-user-list-table"]],decls:28,vars:18,consts:[[1,"table-responsive"],["mat-table","","matSort","",2,"width","100%",3,"dataSource","matSortActive","matSortDirection","matSortChange"],["matColumnDef","_select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["style","padding-top: 8px; padding-bottom: 8px;","mat-cell","",4,"matCellDef"],["matColumnDef","_actions"],["style","width: 120px; text-align: right;","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-table-message",4,"ngIf"],["showFirstLastButtons","",3,"disabled","pageIndex","pageSize","pageSizeOptions","length","page"],["mat-header-cell",""],[3,"rows","selectedKeys"],["mat-cell",""],[3,"row","selectedKeys"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"padding-top","8px","padding-bottom","8px"],[3,"matTooltip",4,"ngFor","ngForOf"],[3,"matTooltip"],[3,"ngClass"],["mat-header-cell","",2,"width","120px","text-align","right"],["mat-icon-button","","type","button","color","primary",3,"routerLink","matTooltip"],["mat-icon-button","","type","button","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-icon-button","","type","button","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","type","button","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],[1,"mat-table-message"],["key","table.noData"],["key","table.loading"]],template:function(e,t){1&e&&(p.Nc(0,"div",0),p.Nc(1,"table",1),p.Tc("matSortChange",(function(e){return t.service.doChangeSort(e)})),p.Lc(2,2),p.xd(3,me,2,2,"th",3),p.xd(4,fe,2,2,"td",4),p.Kc(),p.Lc(5,5),p.xd(6,pe,2,1,"th",3),p.xd(7,he,2,1,"td",4),p.Kc(),p.Lc(8,5),p.xd(9,ve,2,1,"th",6),p.xd(10,be,2,1,"td",4),p.Kc(),p.Lc(11,5),p.xd(12,ge,2,1,"th",6),p.xd(13,ye,2,1,"td",4),p.Kc(),p.Lc(14,5),p.xd(15,we,2,1,"th",3),p.xd(16,Ne,2,1,"td",7),p.Kc(),p.Lc(17,5),p.xd(18,Se,2,1,"th",6),p.xd(19,xe,3,6,"td",4),p.Kc(),p.Lc(20,8),p.xd(21,Le,1,0,"th",9),p.xd(22,je,6,6,"td",4),p.Kc(),p.xd(23,Ce,1,0,"tr",10),p.xd(24,Pe,1,0,"tr",11),p.Mc(),p.xd(25,Fe,2,0,"div",12),p.xd(26,Re,2,0,"div",12),p.Mc(),p.Nc(27,"mat-paginator",13),p.Tc("page",(function(e){return t.service.doChangePagination(e)})),p.Mc()),2&e&&(p.wc(1),p.dd("dataSource",t.service.rows)("matSortActive",t.service.sorter.columnKey)("matSortDirection",t.service.sorter.order),p.wc(4),p.dd("matColumnDef",t.fields.avatars.name),p.wc(3),p.dd("matColumnDef",t.fields.email.name),p.wc(3),p.dd("matColumnDef",t.fields.fullName.name),p.wc(3),p.dd("matColumnDef",t.fields.roles.name),p.wc(3),p.dd("matColumnDef",t.fields.status.name),p.wc(6),p.dd("matHeaderRowDef",t.columns),p.wc(1),p.dd("matRowDefColumns",t.columns),p.wc(1),p.dd("ngIf",!t.service.loading&&!t.service.count),p.wc(1),p.dd("ngIf",t.service.loading),p.wc(1),p.dd("disabled",t.service.loading)("pageIndex",t.service.paginationPageIndex)("pageSize",t.service.paginationPageSize)("pageSizeOptions",p.gd(17,Ae))("length",t.service.count))},directives:[ne.j,se.a,ne.c,ne.e,ne.b,ne.g,ne.i,w.k,ae.a,ne.d,de.a,ne.a,le.a,ue.a,se.b,w.j,q.a,w.i,L.b,c.c,k.a,ne.f,ne.h,y.a],encapsulation:2}),e})(),He=(()=>{class e{constructor(e){this.authService=e,this.breadcrumb=[[Object(u.d)("dashboard.menu")],[Object(u.d)("user.menu")]]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(p.Hc(f.a))},e.\u0275cmp=p.Bc({type:e,selectors:[["app-user-list"]],decls:7,vars:1,consts:[[3,"items"],[1,"app-content-page"],[1,"app-content-title"],["key","user.title"]],template:function(e,t){1&e&&(p.Ic(0,"app-breadcrumb",0),p.Nc(1,"div",1),p.Nc(2,"h1",2),p.Ic(3,"app-i18n",3),p.Mc(),p.Ic(4,"app-user-list-toolbar"),p.Ic(5,"app-user-list-filter"),p.Ic(6,"app-user-list-table"),p.Mc()),2&e&&p.dd("items",t.breadcrumb)},directives:[g.a,y.a,Z,re,Xe],encapsulation:2}),e})(),Be=(()=>{class e{constructor(e,t){this.errorService=e,this.router=t,this.loading=!1,this.user=null}doFind(e){return Object(s.a)(this,void 0,void 0,(function*(){try{this.user=null,this.loading=!0,this.user=yield d.a.find(e),this.loading=!1}catch(t){this.errorService.handle(t),this.user=null,this.loading=!1,this.router.navigate(["/user"])}}))}}return e.\u0275fac=function(t){return new(t||e)(p.Rc(l.a),p.Rc(c.b))},e.\u0275prov=p.Dc({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ke=i("wd/R");const Ee=function(e){return["/user",e,"edit"]};function ze(e,t){if(1&e&&(p.Nc(0,"button",3),p.Ic(1,"mat-icon",4),p.yd(2,"\xa0 "),p.Ic(3,"app-i18n",5),p.Mc()),2&e){const e=p.Xc();p.dd("routerLink",p.hd(1,Ee,e.record.id))}}const _e=function(){return["/audit-log"]},qe=function(e){return{entityId:e}};function $e(e,t){if(1&e&&(p.Nc(0,"button",6),p.Ic(1,"mat-icon",7),p.yd(2,"\xa0 "),p.Ic(3,"app-i18n",8),p.Mc()),2&e){const e=p.Xc();p.dd("routerLink",p.gd(2,_e))("queryParams",p.hd(3,qe,e.record.id))}}const Ge=function(e){return{createdByEmail:e}};function Ue(e,t){if(1&e&&(p.Nc(0,"button",6),p.Ic(1,"mat-icon",9),p.yd(2,"\xa0 "),p.Ic(3,"app-i18n",10),p.Mc()),2&e){const e=p.Xc();p.dd("routerLink",p.gd(2,_e))("queryParams",p.hd(3,Ge,e.record.email))}}let Qe=(()=>{class e{constructor(e,t,i){this.service=e,this.userService=t,this.auditLogService=i}get hasPermissionToEdit(){return this.userService.hasPermissionToEdit}get hasPermissionToImport(){return this.userService.hasPermissionToImport}get hasPermissionToAuditLogs(){return this.auditLogService.hasPermissionToRead}get record(){return this.service.user}}return e.\u0275fac=function(t){return new(t||e)(p.Hc(Be),p.Hc(E.a),p.Hc(z.a))},e.\u0275cmp=p.Bc({type:e,selectors:[["app-user-view-toolbar"]],decls:4,vars:3,consts:[[1,"app-page-toolbar"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-flat-button","","color","primary",3,"routerLink","queryParams",4,"ngIf"],["mat-raised-button","","color","primary",3,"routerLink"],["inline","","fontSet","far","fontIcon","fa-edit"],["key","common.edit"],["mat-flat-button","","color","primary",3,"routerLink","queryParams"],["inline","","fontSet","fas","fontIcon","fa-history"],["key","auditLog.menu"],["inline","","fontSet","far","fontIcon","fa-eye"],["key","user.view.activity"]],template:function(e,t){1&e&&(p.Nc(0,"div",0),p.xd(1,ze,4,3,"button",1),p.xd(2,$e,4,5,"button",2),p.xd(3,Ue,4,5,"button",2),p.Mc()),2&e&&(p.wc(1),p.dd("ngIf",t.record&&t.hasPermissionToEdit),p.wc(1),p.dd("ngIf",t.record&&t.hasPermissionToAuditLogs),p.wc(1),p.dd("ngIf",t.record&&t.hasPermissionToAuditLogs))},directives:[w.k,L.b,c.c,k.a,y.a],encapsulation:2}),e})();var Je=i("2xaH"),Ve=i("XG4R");function Ze(e,t){if(1&e&&(p.Nc(0,"div",1),p.Nc(1,"div",2),p.yd(2),p.Mc(),p.bd(3),p.Mc()),2&e){const e=p.Xc();p.wc(2),p.Ad(" ",e.label," ")}}const Ye=["*"];let We=(()=>{class e{get isEmpty(){return!this.value&&0!==this.value&&!1!==this.value||Array.isArray(this.value)&&!this.value.length}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Bc({type:e,selectors:[["app-view-item-custom"]],inputs:{label:"label",value:"value"},ngContentSelectors:Ye,decls:1,vars:1,consts:[["class","view-item",4,"ngIf"],[1,"view-item"],[1,"view-item--label"]],template:function(e,t){1&e&&(p.cd(),p.xd(0,Ze,4,1,"div",0)),2&e&&p.dd("ngIf",!t.isEmpty)},directives:[w.k],encapsulation:2}),e})();function et(e,t){1&e&&(p.Nc(0,"div",6),p.Ic(1,"mat-spinner",7),p.Mc())}function tt(e,t){if(1&e&&p.Ic(0,"app-view-item-text",10),2&e){const e=p.Xc(2);p.dd("label",e.fields.birthDate.label)("value",e.birthDate(e.presenter(e.record,"birthDate")))}}function it(e,t){if(1&e&&(p.Nc(0,"span",16),p.yd(1),p.Ic(2,"br"),p.Mc()),2&e){const e=t.$implicit,i=p.Xc(2);p.dd("matTooltip",i.roleDescriptionOf(e)),p.wc(1),p.Ad(" ",i.roleLabelOf(e)," ")}}const rt=function(e,t,i){return{"text-green":e,"text-yellow":t,"text-red":i}};function ct(e,t){if(1&e&&(p.Nc(0,"div"),p.Nc(1,"div",8),p.Nc(2,"div",9),p.Ic(3,"app-view-item-text",10),p.Ic(4,"app-view-item-text",10),p.Ic(5,"app-view-item-text",10),p.Ic(6,"app-view-item-text",11),p.Ic(7,"app-view-item-text",10),p.xd(8,tt,1,2,"app-view-item-text",12),p.Ic(9,"app-view-item-images",10),p.Mc(),p.Nc(10,"div",13),p.Nc(11,"app-view-item-custom",10),p.Nc(12,"strong",14),p.yd(13),p.Mc(),p.Mc(),p.Nc(14,"app-view-item-custom",10),p.xd(15,it,3,2,"span",15),p.Mc(),p.Mc(),p.Mc(),p.Mc()),2&e){const e=p.Xc();p.wc(3),p.dd("label",e.fields.email.label)("value",e.presenter(e.record,"email")),p.wc(1),p.dd("label",e.fields.firstName.label)("value",e.presenter(e.record,"firstName")),p.wc(1),p.dd("label",e.fields.lastName.label)("value",e.presenter(e.record,"lastName")),p.wc(1),p.dd("label",e.fields.phoneNumber.label)("value",e.presenter(e.record,"phoneNumber")),p.wc(1),p.dd("label",e.fields.nationality.label)("value",e.presenter(e.record,"nationality")),p.wc(1),p.dd("ngIf",e.record.birthDate),p.wc(1),p.dd("label",e.fields.avatars.label)("value",e.presenter(e.record,"avatars")),p.wc(2),p.dd("label",e.fields.status.label)("value",e.presenter(e.record,"status")),p.wc(1),p.dd("ngClass",p.jd(20,rt,"active"===e.record[e.fields.status.name],"invited"===e.record[e.fields.status.name],"empty-permissions"===e.record[e.fields.status.name])),p.wc(1),p.Ad("",e.presenter(e.record,"status")," "),p.wc(1),p.dd("label",e.fields.roles.label)("value",e.record.roles),p.wc(1),p.dd("ngForOf",e.record.roles)}}let ot=(()=>{class e{constructor(e,t,i){this.service=e,this.route=t,this.authService=i,this.breadcrumb=[[Object(u.d)("dashboard.menu")],[Object(u.d)("user.menu"),"/user"],[Object(u.d)("user.view.title")]]}ngOnInit(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.service.doFind(this.route.snapshot.paramMap.get("id"))}))}presenter(e,t){return a.a.presenter(e,t)}get fields(){return a.a.fields}get loading(){return this.service.loading}get record(){return this.service.user}roleDescriptionOf(e){return ce.a.descriptionOf(e)}roleLabelOf(e){return ce.a.labelOf(e)}birthDate(e){return Ke(e).format("ll")}}return e.\u0275fac=function(t){return new(t||e)(p.Hc(Be),p.Hc(c.a),p.Hc(f.a))},e.\u0275cmp=p.Bc({type:e,selectors:[["app-user-view"]],decls:7,vars:3,consts:[[3,"items"],[1,"app-content-page"],[1,"app-content-title"],["key","user.view.title"],["class","app-page-spinner",4,"ngIf"],[4,"ngIf"],[1,"app-page-spinner"],["color","accent"],[1,"row"],[1,"col-md-8"],[3,"label","value"],["prefix","+",3,"label","value"],[3,"label","value",4,"ngIf"],[1,"col-md-4"],[3,"ngClass"],[3,"matTooltip",4,"ngFor","ngForOf"],[3,"matTooltip"]],template:function(e,t){1&e&&(p.Ic(0,"app-breadcrumb",0),p.Nc(1,"div",1),p.Nc(2,"h1",2),p.Ic(3,"app-i18n",3),p.Mc(),p.Ic(4,"app-user-view-toolbar"),p.xd(5,et,2,0,"div",4),p.xd(6,ct,16,24,"div",5),p.Mc()),2&e&&(p.dd("items",t.breadcrumb),p.wc(5),p.dd("ngIf",t.loading),p.wc(1),p.dd("ngIf",!t.loading))},directives:[g.a,y.a,Qe,w.k,I.b,Je.a,Ve.a,We,w.i,w.j,q.a],encapsulation:2}),e})();var nt=i("uswQ"),st=i("mmyZ"),at=i("z7xO");const dt=[{path:"",component:nt.a,children:[{path:":id/edit",component:P,canActivate:[o.a,n.a],data:{permission:st.a.values.userEdit}},{path:"new",component:(()=>{class e{constructor(e,t,i){this.service=e,this.router=t,this.authService=i,this.breadcrumb=[[Object(u.d)("dashboard.menu")],[Object(u.d)("user.title"),"/user"],[Object(u.d)("user.new.title")]]}ngOnInit(){return Object(s.a)(this,void 0,void 0,(function*(){return this.service.doInit()}))}get saveLoading(){return this.service.saveLoading}doSave(e){return this.service.doAdd(e.values)}doCancel(){this.router.navigate(["/user"])}}return e.\u0275fac=function(t){return new(t||e)(p.Hc(h),p.Hc(c.b),p.Hc(f.a))},e.\u0275cmp=p.Bc({type:e,selectors:[["app-user-new-form-page"]],decls:5,vars:3,consts:[[3,"items"],[1,"app-content-page"],[1,"app-content-title"],["key","user.new.title"],[3,"saveLoading","modal","save","cancel"]],template:function(e,t){1&e&&(p.Ic(0,"app-breadcrumb",0),p.Nc(1,"div",1),p.Nc(2,"h1",2),p.Ic(3,"app-i18n",3),p.Mc(),p.Nc(4,"app-user-new-form",4),p.Tc("save",(function(e){return t.doSave(e)}))("cancel",(function(){return t.doCancel()})),p.Mc(),p.Mc()),2&e&&(p.dd("items",t.breadcrumb),p.wc(4),p.dd("saveLoading",t.saveLoading)("modal",!1))},directives:[g.a,y.a,at.a],encapsulation:2}),e})(),canActivate:[o.a,n.a],data:{permission:st.a.values.userCreate}},{path:"import",component:R,canActivate:[o.a,n.a],data:{permission:st.a.values.userImport}},{path:":id",component:ot,canActivate:[o.a,n.a],data:{permission:st.a.values.userRead}},{path:"",component:He,canActivate:[o.a,n.a],data:{permission:st.a.values.userRead}}]}];let lt=(()=>{class e{}return e.\u0275mod=p.Fc({type:e}),e.\u0275inj=p.Ec({factory:function(t){return new(t||e)},providers:[],imports:[[c.f.forChild(dt)],c.f]}),e})();var ut=i("PCNd"),mt=i("jSGM");const{fields:ft}=a.a;var pt=[ft.email,ft.rolesRequired];let ht=(()=>{class e extends mt.a{constructor(e){super(e,d.a.import,pt,Object(u.d)("user.importer.fileName"),Object(u.d)("user.importer.hint"))}}return e.\u0275fac=function(t){return new(t||e)(p.Rc(l.a))},e.\u0275prov=p.Dc({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var vt=i("t9Rf");let bt=(()=>{class e{}return e.\u0275mod=p.Fc({type:e}),e.\u0275inj=p.Ec({factory:function(t){return new(t||e)},providers:[{provide:mt.a,useClass:ht}],imports:[[ut.a,lt,r.a,vt.a]]}),e})()}}]);