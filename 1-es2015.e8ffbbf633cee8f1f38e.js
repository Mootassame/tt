(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+dX3":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r("u9O/"),n=r("LvDl"),a=r("UGp+"),o=r("Vbab"),s=r("3Pt+");class l extends i.a{constructor(e,t,r,{required:i=!1}={}){super(e,t),this.options=r||[],this.required=i}_id(e){return e?Object(n.isString)(e)?e:e.id:e}_label(e){return e?Object(n.isString)(e)?e:e.label:e}forPresenter(e){const t=this.options.find(t=>t.id===this._id(e));return t?this._label(t):e}forFormControl(e){const t=[];return this.required&&t.push(s.r.required),new s.e(this._id(e),t)}forFilterControl(e){return new s.e(this._id(e))}forFilterCast(){return a.f().nullable(!0).label(this.label)}forFormCast(){return a.f().nullable(!0).label(this.label)}forExport(){return a.c().label(this.label)}forImport(){let e=a.f().label(this.label).nullable(!0).oneOf([null,...this.options.map(e=>this._id(e))]);return this.required&&(e=e.required(Object(o.d)("validation.string.selected"))),e}forFilterPreview(e){const t=this.options.find(t=>t.id===this._id(e));return t?this._label(t):e}}},"3arV":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r("u9O/"),n=r("UGp+"),a=r("3Pt+"),o=r("ToKS");class s extends i.a{constructor(e,t,r,{required:i=!1,min:n,max:a}={}){super(e,t),this.storage=r,this.required=i,this.min=n,this.max=a}forPresenter(e){return e||[]}forFormControl(e){const t=[];return this.required&&t.push(a.r.required),(this.min||0===this.min)&&t.push(o.a.minArrayLength(this.min)),(this.max||0===this.max)&&t.push(o.a.maxArrayLength(this.max)),new a.e(e||[],t)}forFormCast(){return n.a().nullable(!0).label(this.label)}forExport(){return n.c().label(this.label).transform((e,t)=>t&&t.length?t.map(e=>e.downloadUrl).join(" "):null)}forImport(){let e=n.a().nullable(!0).label(this.label).transform((e,t)=>t?Array.isArray(t)?t:t.trim().split(" ").map(e=>({name:e.trim(),publicUrl:e.trim(),new:!0})):null);return(this.required||this.min)&&(e=e.required()),(this.min||0===this.min)&&(e=e.min(this.min)),this.max&&(e=e.max(this.max)),e}}},"4fRq":function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var i=new Uint8Array(16);e.exports=function(){return r(i),i}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},APW9:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r("fXoL"),n=r("ofXK"),a=r("tyNb");const o=function(e){return[e]};function s(e,t){if(1&e&&(i.Nc(0,"a",5),i.yd(1),i.Mc()),2&e){const e=i.Xc().$implicit;i.dd("routerLink",i.hd(2,o,e[1])),i.wc(1),i.zd(e[0])}}function l(e,t){if(1&e&&(i.Nc(0,"span",6),i.yd(1),i.Mc()),2&e){const e=i.Xc().$implicit;i.wc(1),i.zd(e[0])}}function c(e,t){1&e&&(i.Nc(0,"span",7),i.yd(1,"/"),i.Mc())}function d(e,t){if(1&e&&(i.Nc(0,"span"),i.xd(1,s,2,4,"a",2),i.xd(2,l,2,1,"span",3),i.xd(3,c,2,0,"span",4),i.Mc()),2&e){const e=t.$implicit,r=t.index,n=i.Xc();i.wc(1),i.dd("ngIf",e.length>=2),i.wc(1),i.dd("ngIf",e.length<2),i.wc(1),i.dd("ngIf",r+1<n.items.length)}}let u=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Bc({type:e,selectors:[["app-breadcrumb"]],inputs:{items:"items"},decls:2,vars:1,consts:[[1,"app-breadcrumb"],[4,"ngFor","ngForOf"],["class","app-breadcrumb-item",3,"routerLink",4,"ngIf"],["class","app-breadcrumb-item",4,"ngIf"],["class","app-breadcrumb-separator",4,"ngIf"],[1,"app-breadcrumb-item",3,"routerLink"],[1,"app-breadcrumb-item"],[1,"app-breadcrumb-separator"]],template:function(e,t){1&e&&(i.Nc(0,"span",0),i.xd(1,d,4,3,"span",1),i.Mc()),2&e&&(i.wc(1),i.dd("ngForOf",t.items))},directives:[n.j,n.k,a.e],encapsulation:2}),e})()},EcEN:function(e,t,r){var i=r("xDdU"),n=r("xk4V"),a=n;a.v1=i,a.v4=n,e.exports=a},I2ZF:function(e,t){for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},YPoJ:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var i=r("mrSG"),n=r("fXoL"),a=r("3Pt+"),o=r("tQI4"),s=r("QmLB"),l=r("bTqV"),c=r("NFeN"),d=r("UDmo"),u=r("ofXK"),p=r("vFJ8");const f=["fileInput"];function m(e,t){if(1&e&&n.Ic(0,"app-validations",9),2&e){const e=n.Xc();n.dd("control",e.control)("label",e.label)}}function h(e,t){if(1&e){const e=n.Oc();n.Nc(0,"div",13),n.Nc(1,"div",14),n.Nc(2,"a",15),n.Ic(3,"img",16),n.Mc(),n.Nc(4,"button",17),n.Tc("click",(function(){n.od(e);const r=t.$implicit;return n.Xc(2).remove(r.id)})),n.Ic(5,"app-i18n",18),n.Mc(),n.Mc(),n.Mc()}if(2&e){const e=t.$implicit;n.wc(2),n.dd("href",e.downloadUrl,n.qd),n.wc(1),n.dd("src",e.downloadUrl,n.qd)}}function b(e,t){if(1&e&&(n.Nc(0,"div",10),n.Nc(1,"div",11),n.xd(2,h,6,2,"div",12),n.Mc(),n.Mc()),2&e){const e=n.Xc();n.wc(2),n.dd("ngForOf",e.value)}}let v=(()=>{class e{constructor(e){this.errorService=e,this.submitted=!1,this.required=!1,this._value=[],this.onChange=()=>{},this.onTouched=()=>{},this.disabled=!1,this.loading=!1,this.localError=null}add(e){return Object(i.a)(this,void 0,void 0,(function*(){try{this.localError=null;const t=e.target.files;if(!t||!t.length)return;let r=t[0];o.a.validate(r,{storage:this.storage,image:!0}),this.loading=!0,console.log("storage",r,this.storage),r=yield o.a.upload(r,{storage:this.storage,image:!0}),this.value=[...this._value,r],this.loading=!1,this.fileInput.nativeElement.value=""}catch(t){this.loading=!1,console.error(t),this.localError=this.errorService.selectMessage(t),this.fileInput.nativeElement.value=""}}))}remove(e){return Object(i.a)(this,void 0,void 0,(function*(){this.value=this.value.filter(t=>t.id!==e)}))}get value(){return this._value}get isFull(){return this.max&&this.value.length>=this.max}set value(e){this._value=e,this.onChange(e),this.onTouched()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.value=e||[]}setDisabledState(e){this.disabled=Boolean(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Hc(s.a))},e.\u0275cmp=n.Bc({type:e,selectors:[["app-image-form-field"]],viewQuery:function(e,t){var r;1&e&&n.td(f,!0),2&e&&n.ld(r=n.Uc())&&(t.fileInput=r.first)},inputs:{submitted:"submitted",control:["formControl","control"],label:"label",required:"required",_value:["value","_value"],storage:"storage",max:"max"},features:[n.vc([{provide:a.k,useExisting:Object(n.pb)(()=>e),multi:!0}])],decls:13,vars:8,consts:[[2,"margin-bottom","24px"],[1,"app-form-label"],["mat-stroked-button","","type","button",3,"disabled","click"],["key","fileUploader.upload"],["type","file","accept","image/*",2,"display","none",3,"disabled","change"],["fileInput",""],[1,"app-form-error"],[3,"control","label",4,"ngIf"],["class","app-form-field",4,"ngIf"],[3,"control","label"],[1,"app-form-field"],[1,"row"],["class","col-xs-6",4,"ngFor","ngForOf"],[1,"col-xs-6"],[1,"image-form-field-image-container"],["target","_blank",3,"href"],[1,"image-form-field-image",3,"src"],["mat-button","","color","accent","type","button",3,"click"],["key","common.remove"]],template:function(e,t){if(1&e){const e=n.Oc();n.Nc(0,"div",0),n.Nc(1,"div",1),n.yd(2),n.Mc(),n.Nc(3,"button",2),n.Tc("click",(function(){return n.od(e),n.md(8).click()})),n.Nc(4,"mat-icon"),n.yd(5,"add"),n.Mc(),n.Ic(6,"app-i18n",3),n.Nc(7,"input",4,5),n.Tc("change",(function(e){return t.add(e)})),n.Mc(),n.Mc(),n.Nc(9,"div",6),n.xd(10,m,1,2,"app-validations",7),n.yd(11),n.Mc(),n.Mc(),n.xd(12,b,3,1,"div",8)}2&e&&(n.wc(1),n.zc("required",t.required),n.wc(1),n.Ad(" ",t.label," "),n.wc(1),n.dd("disabled",t.loading||t.isFull),n.wc(4),n.dd("disabled",t.loading||t.isFull),n.wc(3),n.dd("ngIf",t.submitted),n.wc(1),n.Ad(" ",t.localError," "),n.wc(1),n.dd("ngIf",t.value&&t.value.length))},directives:[l.b,c.a,d.a,u.k,p.a,u.j],encapsulation:2}),e})()},rXYk:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r("UGp+");class n{constructor(e,t){this.fields=e,this.formBuilder=t}buildForm(e={},t){e=e||{};const r={};for(const i of this.fields)r[i.name]=i.forFormControl(e[i.name]);return this.formBuilder.group(r,t)}castSchema(){const e={};return this.fields.forEach(t=>{e[t.name]=t.forFormCast()}),i.d().shape(e)}cast(e){return this.castSchema().cast(e)}}},tQI4:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r("mrSG"),n=r("zuWl"),a=r("Vbab"),o=r("EcEN"),s=r("vDqi"),l=r.n(s),c=r("CN2L"),d=r("KYx6");class u{static validate(e,t){if(!t)return;if(t.image&&!e.type.startsWith("image"))throw new Error(Object(a.d)("fileUploader.image"));if(t.storage.maxSizeInBytes&&e.size>t.storage.maxSizeInBytes)throw new Error(Object(a.d)("fileUploader.size",n(t.storage.maxSizeInBytes)));const r=p(e.name);if(t.formats&&!t.formats.includes(r))throw new Error(Object(a.d)("fileUploader.formats",t.formats.join(", ")))}static upload(e,t){return Object(i.a)(this,void 0,void 0,(function*(){try{this.validate(e,t)}catch(c){return Promise.reject(c)}const r=p(e.name),i=Object(o.v4)(),n=`${i}.${r}`,{uploadCredentials:a,downloadUrl:s,privateUrl:l}=yield this.fetchFileCredentials(n,t);return console.log("file uploader",e,t),yield this.uploadToServer(e,a),{id:i,name:e.name,sizeInBytes:e.size,publicUrl:a&&a.publicUrl?a.publicUrl:null,privateUrl:l,downloadUrl:s,new:!0}}))}static fetchFileCredentials(e,t){return Object(i.a)(this,void 0,void 0,(function*(){const r=c.a.get(),{data:i}=yield d.a.get(`/tenant/${r}/file/credentials`,{params:{filename:e,storageId:t.storage.id}});return console.log("data",i),i}))}static uploadToServer(e,t){return Object(i.a)(this,void 0,void 0,(function*(){try{const r=t.url,i=new FormData;for(const[e,n]of Object.entries(t.fields||{}))i.append(e,n);return i.append("file",e),console.log("formData",i),l.a.post(r,i,{headers:{"Content-Type":"multipart/form-data"}})}catch(r){throw console.error(r),r}}))}}function p(e){return e?/(?:\.([^.]+))?$/.exec(e)[1]:null}},vFJ8:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r("Vbab");class n{static get(e,t,r={}){const n=Object.keys(r).map(e=>r[e]);return{required:Object(i.d)("validation.mixed.required").replace("${path}",t),maxlength:Object(i.d)("validation.string.max").replace("${path}",t).replace("${max}",n[0]),minlength:Object(i.d)("validation.string.min").replace("${path}",t).replace("${min}",n[0]),max:Object(i.d)("validation.number.max").replace("${path}",t).replace("${max}",n[0]),min:Object(i.d)("validation.number.min").replace("${path}",t).replace("${min}",n[0]),maxArrayLength:Object(i.d)("validation.array.max").replace("${path}",t).replace("${max}",n[0]),minArrayLength:Object(i.d)("validation.array.min").replace("${path}",t).replace("${min}",n[0]),date:Object(i.d)("validation.mixed.default").replace("${path}",t),pattern:Object(i.d)("validation.mixed.default").replace("${path}",t),datetime:Object(i.d)("validation.mixed.default").replace("${path}",t),number:Object(i.d)("validation.number.type").replace("${path}",t),integer:Object(i.d)("validation.number.integer").replace("${path}",t),passwordMustMatch:Object(i.d)("auth.passwordChange.mustMatch")}[e]}}var a=r("fXoL"),o=r("ofXK");function s(e,t){if(1&e&&(a.Nc(0,"span"),a.yd(1),a.Mc()),2&e){const e=a.Xc();a.wc(1),a.Ad(" ",e.errorMessage,"\n")}}let l=(()=>{class e{get invalid(){return Boolean(this.errorMessage)}get errorMessage(){const e=this.control.errors;for(const t in e)if(e.hasOwnProperty(t)&&(!this.ngForm||this.control.touched||this.control.dirty||this.ngForm.submitted))return n.get(t,this.label,e[t]);return null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Bc({type:e,selectors:[["app-validations"]],inputs:{ngForm:"ngForm",control:"control",label:"label"},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&a.xd(0,s,2,1,"span",0),2&e&&a.dd("ngIf",t.errorMessage)},directives:[o.k],encapsulation:2}),e})()},xDdU:function(e,t,r){var i,n,a=r("4fRq"),o=r("I2ZF"),s=0,l=0;e.exports=function(e,t,r){var c=t&&r||0,d=t||[],u=(e=e||{}).node||i,p=void 0!==e.clockseq?e.clockseq:n;if(null==u||null==p){var f=a();null==u&&(u=i=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=n=16383&(f[6]<<8|f[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:l+1,b=m-s+(h-l)/1e4;if(b<0&&void 0===e.clockseq&&(p=p+1&16383),(b<0||m>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,l=h,n=p;var v=(1e4*(268435455&(m+=122192928e5))+h)%4294967296;d[c++]=v>>>24&255,d[c++]=v>>>16&255,d[c++]=v>>>8&255,d[c++]=255&v;var g=m/4294967296*1e4&268435455;d[c++]=g>>>8&255,d[c++]=255&g,d[c++]=g>>>24&15|16,d[c++]=g>>>16&255,d[c++]=p>>>8|128,d[c++]=255&p;for(var y=0;y<6;++y)d[c+y]=u[y];return t||o(d)}},xk4V:function(e,t,r){var i=r("4fRq"),n=r("I2ZF");e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||n(o)}},zuWl:function(e,t,r){"use strict";!function(t){var r=/^(b|B)$/,i={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},n={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function a(e){var t,a,o,s,l,c,d,u,p,f,m,h,b,v,g,y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},x=[],w=0,O=void 0,j=void 0;if(isNaN(e))throw new TypeError("Invalid number");return a=!0===y.bits,m=!0===y.unix,f=void 0!==y.round?y.round:m?1:2,c=void 0!==y.locale?y.locale:"",d=y.localeOptions||{},h=void 0!==y.separator?y.separator:"",b=void 0!==y.spacer?y.spacer:m?"":" ",g=y.symbols||{},v=2===(t=y.base||2)&&y.standard||"jedec",p=y.output||"string",s=!0===y.fullform,l=y.fullforms instanceof Array?y.fullforms:[],O=void 0!==y.exponent?y.exponent:-1,o=2<t?1e3:1024,(u=(j=Number(e))<0)&&(j=-j),(-1===O||isNaN(O))&&(O=Math.floor(Math.log(j)/Math.log(o)))<0&&(O=0),8<O&&(O=8),"exponent"===p?O:(0===j?(x[0]=0,x[1]=m?"":i[v][a?"bits":"bytes"][O]):(w=j/(2===t?Math.pow(2,10*O):Math.pow(1e3,O)),a&&o<=(w*=8)&&O<8&&(w/=o,O++),x[0]=Number(w.toFixed(0<O?f:0)),x[0]===o&&O<8&&void 0===y.exponent&&(x[0]=1,O++),x[1]=10===t&&1===O?a?"kb":"kB":i[v][a?"bits":"bytes"][O],m&&(x[1]="jedec"===v?x[1].charAt(0):0<O?x[1].replace(/B$/,""):x[1],r.test(x[1])&&(x[0]=Math.floor(x[0]),x[1]=""))),u&&(x[0]=-x[0]),x[1]=g[x[1]]||x[1],!0===c?x[0]=x[0].toLocaleString():0<c.length?x[0]=x[0].toLocaleString(c,d):0<h.length&&(x[0]=x[0].toString().replace(".",h)),"array"===p?x:(s&&(x[1]=l[O]?l[O]:n[v][O]+(a?"bit":"byte")+(1===x[0]?"":"s")),"object"===p?{value:x[0],symbol:x[1],exponent:O}:x.join(b)))}a.partial=function(e){return function(t){return a(t,e)}},e.exports=a}("undefined"!=typeof window?window:global)}}]);